<!DOCTYPE html>
<html lang="en">
<head>
    <title>Managed Apps & Updates</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40017387">
    <meta id="document-version" name="document-version" content="4.3.1">
    <meta id="build" name="build" content="bc2cee2fd2f336931ac1fbeab087f169" />
    <meta id="chapterId" name="chapterId" content="TP40017387-CH10">
    <meta id="date" name="date" content="2018-04-19">
    <meta id="description" name="description" content="Describes how system administrators can send device
management commands to managed devices.">
    <meta id="book-title" name="book-title" content="Mobile Device Management Protocol Reference">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/Data Management/Device Information}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2018 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Mobile Device Management Protocol Reference: Managed Apps & Updates">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1277">
    <link id="book-index-page" rel="Start" title="Mobile Device Management Protocol Reference" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="../6.5-MDM_Rosters/MDM_Rosters.html">
    <link id="previous-page" rel="Prev" type="text/html" href="../5-Web_Service_Protocol_VPP/webservice.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1277/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1277/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40017387-CH10" title="Managed Apps &amp; Updates"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Mobile Device Management Protocol Reference</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../6.5-MDM_Rosters/MDM_Rosters.html'>Next</a><a class='previousLink' rel='prev' href='../5-Web_Service_Protocol_VPP/webservice.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40017387-CH10-SW1" title="Managed Apps &amp; Updates"></a><h1 id="pageTitle">Managed Apps &amp; Updates</h1><p> This chapter describes the process and supporting services needed to manage the apps and OS updates on supervised devices.</p><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW25" title="Managing Applications"></a><h2 class="jump">Managing Applications</h2><p>MDM is the recommended way to manage applications for your enterprise. You can use MDM to help users install enterprise apps, and in iOS 5.0 and later, you can also install App Store apps purchased using the Volume Purchase Program (VPP). The way that you manage these applications depends on the version of iOS that a device is running.</p><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW291" title="iOS 9.0 and Later"></a><h3 class="jump">iOS 9.0 and Later</h3><p>In iOS 9.0 and later, you can use MDM’s app assignment feature to assign app licenses to device serial numbers. MDM can then be used to push a VPP app to a device regardless of whether an iTunes account is signed in. You can later remove those licenses and use them with other devices.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW29" title="iOS 7.0 and Later"></a><h3 class="jump">iOS 7.0 and Later</h3><p>In iOS 7.0 and later, you can use MDM’s app assignment feature to assign app licenses to iTunes accounts. MDM can then be used to push a VPP app to a device that is signed in to that iTunes account. You can later remove those licenses and use them with other iTunes accounts.</p><p>Also, in iOS 7.0 and later, an MDM server can provide configuration dictionaries to managed apps and can read response dictionaries from those apps. Apps can take advantage of this functionality to preconfigure themselves in a supervised environment, such as a classroom setting.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW26" title="iOS 5.0 and Later"></a><h3 class="jump">iOS 5.0 and Later</h3><p>In iOS 5.0 and later, using MDM to manage apps gives you several advantages:</p><ul class="ul"><li class="li"><p>You can purchase apps for users without manually distributing redemption codes.</p></li><li class="li"><p>You can notify the user that an app is available for installation. (The user must agree to installation before the app is installed.)</p></li><li class="li"><p>A managed app can be excluded from the user’s backup. This prevents the app’s data from leaving the device during a backup.</p></li><li class="li"><p>The app can be configured so that the app and its data are automatically removed when the MDM profile is removed. This prevents the app’s data from persisting on a device unless it is managed.</p></li></ul><p>An app purchased from the App Store and installed on a user’s device is “owned” by the iTunes account used at the time of installation. This means that the user may install the app (not its data) on unmanaged devices.</p><p>An app internally developed by an enterprise is not backed up. A user cannot install such an app on an unmanaged device.</p><p>In order to support this behavior, your internally hosted enterprise app catalog must use the <code>InstallApplication</code> command instead of providing a direct link to the app (with a manifest URL or iTunes Store URL). This allows you to mark the app as managed during installation.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW27" title="iOS 4.x and Later"></a><h3 class="jump">iOS 4.x and Later</h3><p>To disable enterprise apps, you can remove the provisioning profile that they depend on. However, as mentioned in <span class="content_text"><a href="../6-MDM_Best_Practices/MDM_Best_Practices.html#//apple_ref/doc/uid/TP40017387-CH5-SW8" data-renderer-version="1">Provisioning Profiles Can Be Installed Using MDM</a></span>, <em>do not</em> rely solely on that mechanism for limiting access to your enterprise applications for two reasons:</p><ul class="ul"><li class="li"><p>Removing a provisioning profile does not prevent the app from launching until the device is rebooted.</p></li><li class="li"><p>The provisioning profile is likely to have been synced to a computer, and thus will probably be reinstalled during the next sync.</p></li></ul><p>To limit access to your enterprise application, follow these recommendations:</p><ul class="ul"><li class="li"><p>Have an online method of authenticating users when they launch your app. Use either a password or identity certificate to authenticate the user.</p></li><li class="li"><p>Store local app data in your application’s Caches folder to prevent the data from being backed up.</p></li><li class="li"><p>When you decide that the user should no longer have access to the application’s data, mark the user’s account on the server inactive in some way.</p></li><li class="li"><p>When your app detects that the user is no longer eligible to access the app, if the data is particularly sensitive, it should erase the local app data.</p></li><li class="li"><p>If your application has an offline mode, limit the amount of time users can access the data before reauthenticating online. Ensure that this timeout is enforced across multiple application launches.</p><p>If desired, you can also limit the number of launches to prevent time server forging attacks.</p><p>Be sure to store any information about the last successful authentication in your Caches folder (or in the keychain with appropriate flags) so that it does not get backed up. If you do not, the user could potentially modify the time stamp in a backup file, resync the device, and continue using the application.</p></li></ul><p>These guidelines assume that all the application’s data is replicated on your server. If you have data that resides only on the device (including offline edits), preserve a copy of the user’s changes on the server. Be sure to do so in a way that protects the integrity of the server’s data against disgruntled former users.</p></section></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW41" title="Managing OS Software Updates"></a><h2 class="jump">Managing OS Software Updates</h2><p>MDM commands can restrict updates or initiate updates of the operating system on managed devices. The Apple Software Lookup Service provides a list of available OS versions across platforms to help determine which OS to use.</p><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW42" title="Restricting Updates"></a><h3 class="jump">Restricting Updates</h3><p>Administrators can delay the availability of OS updates on the device via the <span class="content_text"><a href="../../../../../featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206-CH1-SW13" data-renderer-version="1" target="_self">Restrictions Payload</a></span>. Use the <code>forceDelayedSoftwareUpdates</code> key to enable the feature and the <code>enforcedSoftwareUpdateDelay</code> to define how many days the update should be delayed.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW43" title="Software Updates"></a><h3 class="jump">Software Updates</h3><p>Send <span class="content_text"><a href="../3-MDM_Protocol/MDM_Protocol.html#//apple_ref/doc/uid/TP40017387-CH3-SW302" data-renderer-version="1">Software Update</a></span> commands to the device to update to a specific OS version on the device. Administrators can also control when the device should be updated.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW44" title="Apple Software Lookup Service"></a><h3 class="jump">Apple Software Lookup Service</h3><p>Use the service at <span class="content_text"><a href="https://gdmf.apple.com/v2/pmv" class="urlLink" rel="external">https://gdmf.apple.com/v2/pmv</a></span> to obtain a list of available updates.</p><p>The JSON repsonse contains two lists of available software releases. The <code>AssetSets</code> list contains all the releases available for MDMs to push to their supervised devices. The other list, <code>PublicAssetSets</code> contains the latest releases available to the general public (non-supervised devices) if they try to upgrade. The <code>PublicAssetSets</code> is a subset of the <code>AssetSets</code> list. </p><p>Each element in the list contains the product version number of the OS, the posting date, the expiration date, and a list of supported devices for that release. The expiration date is typically set to 90 days after the posting date and if an expiration date is in the past, then that release should be ignored. The device list will match the <code>ProductName</code> values from the device, which is returned in the initial <code>Authenticate</code> request or the <code>DeviceInformation</code> response.</p><p>This is a sample response:  </p><div class="codesample clear"><table><tr><td scope="row"><pre>{
  "PublicAssetSets": {
    "iOS": [
      {
        “ProductVersion": "10.0.2",
        "PostingDate": "2017-11-29",
        "ExpirationDate": "2018-02-27",
        "SupportedDevices": ["iPad3,4", "iPad3,5", "iPhone5,1", "iPhone5,2", "iPod7,1"]
      },
      {
        "ProductVersion": "7.0.1",
        "PostingDate": "2017-11-29",
        "ExpirationDate": "2018-02-27",
        "SupportedDevices": ["AppleTV2,1"]
      }
    ]
  },<span></span></pre></td></tr><tr><td scope="row"><pre>  "AssetSets": {
    "iOS": [
      {
        "ProductVersion": "10.0.2",
        "PostingDate": "2017-11-29",
        "ExpirationDate": "2018-02-27",
        "SupportedDevices": ["iPad3,4", "iPad3,5", "iPhone5,1", "iPhone5,2", "iPod7,1"]
      },
      {
        "ProductVersion": "7.0.1",
        "PostingDate": "2017-11-29",
        "ExpirationDate": "2018-02-27",
        "SupportedDevices": ["AppleTV2,1"]
      },
      {
        "ProductVersion": "10.0.1",
        "PostingDate": "2017-11-10",
        "ExpirationDate": "2018-02-08",
        "SupportedDevices": ["iPad3,4", "iPad3,5", "iPhone5,1", "iPhone5,2", "iPod7,1"]
      }
    ]
  }
}
<span></span></pre></td></tr></table></div><p>Use the product version list to determine which versions are greater than the device’s current OS version. Provide that list of versions to the administrator as potential OS update candidates.</p><p>The assets are grouped by OS platform. Currently, all the assets are under iOS, including tvOS and watchOS.</p></section></section><section><a name="//apple_ref/doc/uid/TP40017387-CH10-SW30" title="Managed “Open In”"></a><h2 class="jump">Managed “Open In”</h2><p>In iOS 7.0 and later, an MDM server can prevent accidental movement of data in and out of managed accounts and apps on a user’s device by installing a profile with a Restrictions payload that specifies the restrictions <code>allowOpenFromManagedToUnmanaged</code> and <code>allowOpenFromUnmanagedToManaged</code>.</p><p>When the <code>allowOpenFromManagedToUnmanaged</code> restriction is specified, an Open In sheet started from within a managed app or account shows only other managed apps and accounts. When the <code>allowOpenFromUnmanagedToManaged</code> restriction is specified, an Open In sheet started from within an unmanaged app or account shows only other unmanaged apps and accounts.</p><p>The Open In sheet shown by Safari and AirDrop continues to show all apps and accounts even when these restrictions are specified.</p><p>It is a best practice to use these restrictions to manage data and attachments on a user’s device.</p></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../6.5-MDM_Rosters/MDM_Rosters.html'>Next</a><a class='previousLink' rel='prev' href='../5-Web_Service_Protocol_VPP/webservice.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2018 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2018-04-19</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/1277/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/1277/JavaScript/library.js"></script>
    <script src="../../../../../Resources/1277/JavaScript/feedback.js"></script>
</body>
</html>
