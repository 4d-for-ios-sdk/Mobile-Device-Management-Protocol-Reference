<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mobile Device Management (MDM) Protocol</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40017387">
    <meta id="document-version" name="document-version" content="4.0.7">
    <meta id="build" name="build" content="73a86ab2241a413ce0c3e0e8d970ff25"/>
    <meta id="chapterId" name="chapterId" content="TP40017387-CH3">
    <meta id="date" name="date" content="2017-09-12">
    <meta id="description" name="description" content="Describes how system administrators can send device
management commands to managed devices.">
    <meta id="book-title" name="book-title" content="Mobile Device Management Protocol Reference">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/Data Management/Device Information}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Mobile Device Management Protocol Reference: Mobile Device Management (MDM) Protocol">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1264">
    <link id="book-index-page" rel="Start" title="Mobile Device Management Protocol Reference" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html">
    <link id="previous-page" rel="Prev" type="text/html" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/2-MDM_Check_In_Protocol/MDM_Check_In_Protocol..html">
    <link rel="stylesheet" type="text/css" href="https://developer.apple.com/library/content/Resources/1264/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="https://developer.apple.com/library/content/Resources/1264/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body>
<a name="//apple_ref/doc/uid/TP40017387-CH3" title="Mobile Device Management (MDM) Protocol"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id="ssi_Header" class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href="https://developer.apple.com/library/content/navigation/">Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href="https://developer.apple.com/">Developer</a>
            <div id="ssi_SearchButton" role="button" title="Search">Search</div>
        </div>
        <form id="ssi_SearchMenu" method="get" action="https://developer.apple.com/library/content/search/" accept-charset="utf-8">
            <label for="adcsearch">Search Guides and Sample Code</label>
            
            
    
            <input type="search" id="ssi_SearchField" name="q" accesskey="s" results="5"/>
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Mobile Device Management Protocol Reference</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex="4" rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex="3" title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class="nextLink" rel="next" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html">Next</a><a class="previousLink" rel="prev" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/2-MDM_Check_In_Protocol/MDM_Check_In_Protocol..html">Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40017387-CH3-SW2" title="Mobile Device Management (MDM) Protocol"></a>
<h1 id="pageTitle">Mobile Device Management (MDM) Protocol</h1>

<p>The Mobile Device Management (MDM) protocol provides a way to tell a device to execute certain management commands remotely. The way it works is straightforward.</p><p><strong>During installation:</strong></p><ul class="ul"><li class="li"><p>The user or administrator tells the device to install an MDM payload. The structure of this payload is described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW50" data-renderer-version="1">Structure of MDM Payloads</a></span>.</p></li><li class="li"><p>The device connects to the check-in server. The device presents its identity certificate for authentication, along with its UDID and push notification topic.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW63" title="Note"></a><p><strong>Note:</strong>&nbsp;Although UDIDs are used by MDM, the use of UDIDs is deprecated for iOS apps.</p><p></p></aside></div><p>If the server accepts the device, the device provides its push notification device token to the server. The server should use this token to send push messages to the device. This check-in message also contains a <code>PushMagic</code> string. The server must remember this string and include it in any push messages it sends to the device.</p></li></ul><p><strong>During normal operation:</strong></p><ul class="ul"><li class="li"><p>The server (at some point in the future) sends out a push notification to the device.</p></li><li class="li"><p>The device polls the server for a command in response to the push notification.</p></li><li class="li"><p>The device performs the command.</p></li><li class="li"><p>The device contacts the server to report the result of the last command and to request the next command.</p></li></ul><p>From time to time, the device token may change. When a change is detected, the device automatically checks in with the MDM server to report its new push notification token.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW32" title="Note"></a><p><strong>Note:</strong>&nbsp;The device polls only in response to a push notification; it does not poll the server immediately after installation. The server must send a push notification to the device to begin a transaction.</p><p></p></aside></div><p>The device initiates communication with the MDM server in response to a push notification by establishing a TLS connection to the MDM server URL. The device validates the server’s certificate, then uses the identity specified in its MDM payload as the client authentication certificate for the connection.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW48" title="Note"></a><p><strong>Note:</strong>&nbsp;MDM follows HTTP <code>3xx</code> redirections without user interaction. However, it does not remember the URL given by HTTP <code>301 (Moved Permanently)</code> redirections. Each transaction begins at the URL specified in the MDM payload.</p><p></p></aside></div><p>Mobile Device Management, as its name implies, was originally developed for embedded systems. To support environments where a computer is bound to an Open Directory server and various network users may log in, extensions to the MDM protocol were developed to identify and authenticate the network user logging in so that any network user is also managed by the MDM server (via their user profiles). The extensions made to the MDM protocol are described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW62" data-renderer-version="1">MDM Protocol Extensions</a></span>.</p>
<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW579" title="Note"></a><p><strong>Note:</strong>&nbsp;
Login may be blocked momentarily while the MDM server is contacted for its latest settings. Device enrollment can also be performed later, after the computer is connected to the Internet.</p><p></p></aside></div>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW50" title="Structure of MDM Payloads"></a><h2 class="jump">Structure of MDM Payloads</h2><p>The Mobile Device Management (MDM) payload, a simple property list, is designated by the <code>com.apple.mdm</code> value in the <code>PayloadType</code> field. This payload defines the following keys specific to MDM payloads:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><td scope="row"><p><code>IdentityCertificateUUID</code></p></td><td><p>String</p></td><td><p><em>Mandatory.</em> UUID of the certificate payload for the device’s identity. It may also point to a SCEP payload.</p></td></tr><tr><td scope="row"><p><code>Topic</code></p></td><td><p>String</p></td><td><p><em>Mandatory.</em> The topic that MDM listens to for push notifications. The certificate that the server uses to send push notifications must have the same topic in its subject. The topic must begin with the <code>com.apple.mgmt.</code> prefix.</p></td></tr>
<tr><td scope="row"><p><code>ServerURL</code></p></td><td><p>String</p></td><td><p><em>Mandatory.</em> The URL that the device contacts to retrieve device management instructions. Must begin with the <code>https://</code> URL scheme, and may contain a port number (<code>:1234</code>, for example).</p></td></tr>
<tr><td scope="row"><p><code>ServerCapabilities</code></p></td><td><p>Array</p></td><td><p>Optional. An array of strings indicating server capabilities. If the server manages macOS devices or a Shared iPad, this field is mandatory and must contain the value <code>com.apple.mdm.per-user-connections</code>. This indicates that the server supports both device and user connections. See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW62" data-renderer-version="1">MDM Protocol Extensions</a></span>.</p></td></tr>
<tr><td scope="row"><p><code>SignMessage</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, each message coming from the device carries the additional <code>Mdm-Signature</code> HTTP header. Defaults to <code>false</code>.</p><p>See <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/6-MDM_Best_Practices/MDM_Best_Practices.html#//apple_ref/doc/uid/TP40017387-CH5-SW1" data-renderer-version="1">Passing the Client Identity Through Proxies</a></span> for details.</p></td></tr><tr><td scope="row"><p><code>CheckInURL</code></p></td><td><p>String</p></td><td><p>Optional. The URL that the device should use to check in during installation. Must begin with the <code>https://</code> URL scheme and may contain a port number (<code>:1234</code>, for example). If this URL is not given, the <code>ServerURL</code> is used for both purposes.</p></td></tr><tr><td scope="row"><p><code>CheckOutWhenRemoved</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, the device attempts to send a <code>CheckOut</code> message to the check-in server when the profile is removed. Defaults to <code>false</code>.</p><p>Note: macOS v10.8 acts as though this setting is always <code>true</code>.</p><p><strong>Availability: </strong>Available in iOS 5.0 and later</p></td></tr><tr><td scope="row"><p><code>AccessRights</code></p></td><td><p>Integer, flags</p></td><td><p><em>Required.</em> Logical OR of the following bit-flags:</p><ul class="threeHead"><li class="li"><p>1: Allow inspection of installed configuration profiles.</p></li><li class="li"><p>2: Allow installation and removal of configuration profiles.</p></li><li class="li"><p>4: Allow device lock and passcode removal.</p></li><li class="li"><p>8: Allow device erase.</p></li><li class="li"><p>16: Allow query of Device Information (device capacity, serial number).</p></li><li class="li"><p>32: Allow query of Network Information (phone/SIM numbers, MAC addresses).</p></li><li class="li"><p>64: Allow inspection of installed provisioning profiles.</p></li><li class="li"><p>128: Allow installation and removal of provisioning profiles.</p></li><li class="li"><p>256: Allow inspection of installed applications.</p></li><li class="li"><p>512: Allow restriction-related queries.</p></li><li class="li"><p>1024: Allow security-related queries.</p></li><li class="li"><p>2048: Allow manipulation of settings. <strong>Availability:</strong> Available in iOS 5.0 and later. Available in macOS 10.9 for certain commands.</p></li><li class="li"><p>4096: Allow app management. <strong>Availability:</strong> Available in iOS 5.0 and later. Available in macOS 10.9 for certain commands.</p></li></ul><p>May not be zero. If 2 is specified, 1 must also be specified. If 128 is specified, 64 must also be specified.</p></td></tr>

<tr><td scope="row"><p><code>UseDevelopmentAPNS</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, the device uses the development APNS servers. Otherwise, the device uses the production servers. Defaults to <code>false</code>. Note that this property must be set to false if your Apple Push Notification Service certificate was issued by the Apple Push Certificate Portal (<span class="content_text"><a href="https://identity.apple.com/pushcert" class="urlLink" rel="external">identity.apple.com/pushcert</a></span>). That portal only issues certificates for the production push environment.</p></td></tr>

<tr><td scope="row"><p><code>ServerURLPinningCertificateUUIDs</code></p></td><td><p>Array</p></td><td><p>Optional. Array of strings containing the <code>PayloadUUIDs</code> of certificates to be used when evaluating trust to the <code>.../connect/</code> URLs of MDM servers. <strong>Availability:</strong> Available in macOS 10.13 and later.</p></td></tr>
<tr><td scope="row"><p><code>CheckInURLPinningCertificateUUIDs</code></p></td><td><p>Array</p></td><td><p>Optional. Array of strings containing the <code>PayloadUUIDs</code> of certificates to be used when evaluating trust to the <code>.../checkin/</code> URLs of MDM servers. <strong>Availability:</strong> Available in macOS 10.13 and later.</p></td></tr>
<tr><td scope="row"><p><code>PinningRevocationCheckRequired</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, connection will fail unless a verified positive response is obtained during certificate revocation checks. If <code>false</code>, revocation checking is done on a best attempt basis and failure to reach the server is not considered fatal. Default is <code>false</code>.<strong>Availability:</strong> Available in macOS 10.13 and later.</p></td></tr>
</table></div>

<p>In addition, four standard payload keys must be defined:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Value</p></th></tr><tr><td scope="row"><p><code>PayloadType</code></p></td><td><p><code>com.apple.mdm</code>.</p></td></tr><tr><td scope="row"><p><code>PayloadVersion</code></p></td><td><p><code>1</code>.</p></td></tr><tr><td scope="row"><p><code>PayloadIdentifier</code></p></td><td><p>A value must be provided.</p></td></tr><tr><td scope="row"><p><code>PayloadUUID</code></p></td><td><p>A globally unique value must be provided.</p></td></tr></table></div><p>These keys are documented in <span class="content_text"><a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206-CH1-SW1" data-renderer-version="1" target="_self">Payload Dictionary Keys Common to All Payloads</a></span> in <em><a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206" data-renderer-version="1" target="_self">Configuration Profile Reference</a></em>.</p><p>For the general structure of the payload and an example, see <span class="content_text"><a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206-CH1" data-renderer-version="1" target="_self">Configuration Profile Key Reference</a></span> in <em><a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206" data-renderer-version="1" target="_self">Configuration Profile Reference</a></em>.</p>
<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW82" title="Note"></a><p><strong>Note:</strong>&nbsp;
Profile payload dictionary keys that are prefixed with “Payload” are reserved key names and must never be treated as managed preferences. Any other key in the payload
dictionary may be considered a managed preference for that preference domain.</p><p></p></aside></div>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW3" title="Structure of MDM Messages"></a>
<h2 class="jump">Structure of MDM Messages</h2><p>Once the MDM payload is installed, the device listens for a push notification. The topic that MDM listens to corresponds to the contents of the <code>User ID</code> parameter in the Subject field of the push notification client certificate.</p><p>To cause the device to poll the MDM server for commands, the MDM server sends a notification through the APNS gateway to the device. The message sent with the push notification is JSON-formatted and must contain the <code>PushMagic</code> string as the value of the <code>mdm</code> key. For example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>{"mdm":"PushMagicValue"}<span></span></pre></td></tr></table></div><p>In place of <code>PushMagicValue</code> above, substitute the actual <code>PushMagic</code> string that the device sends to the MDM server in the <code>TokenUpdate</code> message. That should be the whole message. There should not be an <code>aps</code> key. (The <code>aps</code> key is used only for third-party app push notifications.)</p><p>The device responds to this push notification by contacting the MDM server using HTTP PUT over TLS (SSL). This message may contain an <code>Idle</code> status or may contain the result of a previous operation. If the connection is severed while the device is performing a task, the device will try to report its result again once networking is restored.</p><p><span class="content_text">Listing 1</span> shows an example of an MDM request payload.</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW29" title="Listing 1MDM request payload example"></a><p class="codesample clear"><strong class="caption_number">Listing 1</strong>&nbsp;&nbsp;MDM request payload example</p><div class="codesample clear"><table><tr><td scope="row"><pre>PUT /your/url HTTP/1.1<span></span></pre></td></tr><tr><td scope="row"><pre>Host: www.yourhostname.com<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 1234<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/x-apple-aspen-mdm; charset=UTF-8<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="1.0"&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;UDID&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;...&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CommandUUID&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;9F09D114-BCFD-42AD-A974-371AA7D6256E&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;Status&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;Acknowledged&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>
<p>The server responds by sending the next command that the device should perform by enclosing it in the HTTP reply.</p><p><span class="content_text">Listing 2</span> shows an example of the server’s response payload.</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW30" title="Listing 2MDM response payload example"></a><p class="codesample clear"><strong class="caption_number">Listing 2</strong>&nbsp;&nbsp;MDM response payload example</p><div class="codesample clear"><table><tr><td scope="row"><pre>HTTP/1.1 200 OK<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Length: 1234<span></span></pre></td></tr><tr><td scope="row"><pre>Content-Type: application/xml; charset=UTF-8<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;plist version="1.0"&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CommandUUID&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;9F09D114-BCFD-42AD-A974-371AA7D6256E&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;Command&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>      ...<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div><p>The device performs the command and sends its reply in another HTTP PUT request to the MDM server. The MDM server can then reply with the next command or end the connection by sending a <code>200</code> status (OK) with an empty response body.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW576" title="Note"></a><p><strong>Note:</strong>&nbsp;An empty response body must be zero bytes in length, not an empty property list.</p><p></p></aside></div><p>If the connection is broken while the device is performing a command, the device caches the result of the command and re-attempts connection to the server until the status is delivered.</p><p>It is safe to send several push notifications to the device. APNS coalesces multiple notifications and delivers only the last one to the device.</p><p>You can monitor the MDM activity in the device console using Xcode or <span class="content_text"><a href="https://itunes.apple.com/us/app/apple-configurator-2/id1037126344?mt=12" class="urlLink" rel="external">Apple Configurator 2</a></span>. A healthy (but empty) push activity should look like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>Wed Sep 29 02:09:05 unknown mdmd[1810] &lt;Warning&gt;: MDM|mdmd starting...<span></span></pre></td></tr><tr><td scope="row"><pre>Wed Sep 29 02:09:06 unknown mdmd[1810] &lt;Warning&gt;: MDM|Network reachability has changed.<span></span></pre></td></tr><tr><td scope="row"><pre>Wed Sep 29 02:09:06 unknown mdmd[1810] &lt;Warning&gt;: MDM|Polling MDM server https://10.0.1.4:2001/mdm for commands<span></span></pre></td></tr><tr><td scope="row"><pre>Wed Sep 29 02:09:06 unknown mdmd[1810] &lt;Warning&gt;: MDM|Transaction completed. Status: 200<span></span></pre></td></tr><tr><td scope="row"><pre>Wed Sep 29 02:09:06 unknown mdmd[1810] &lt;Warning&gt;: MDM|Server has no commands for this device.<span></span></pre></td></tr><tr><td scope="row"><pre>Wed Sep 29 02:09:08 unknown mdmd[1810] &lt;Warning&gt;: MDM|mdmd stopping...<span></span></pre></td></tr></table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW4" title="MDM Command Payloads"></a>
<h2 class="jump">MDM Command Payloads</h2>
<p>A host may send a command to the device by sending a plist-encoded dictionary that contains the following required keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>CommandUUID</code></p></td><td><p>String</p></td><td><p>UUID of the command.</p></td></tr><tr><td scope="row"><p><code>Command</code></p></td><td><p>Dictionary</p></td><td><p>The command dictionary.</p></td></tr></table></div><p>The content of the <code>Command</code> dictionary must include the following required key, as well as other keys defined by each command.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p>Request type. See each command’s description.</p></td></tr>
<tr><td scope="row"><p><code>RequestRequiresNetworkTether</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, the command is executed only if the device has a tethered network connection; otherwise an MCMDM error value of 12081 is returned (see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_13" data-renderer-version="1">MCMDMErrorDomain</a></span>). Default value is <code>false</code>.</p></td></tr>
</table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW5" title="MDM Result Payloads"></a>
<h2 class="jump">MDM Result Payloads</h2>
<p>The device replies to the host by sending a plist-encoded dictionary containing the following keys, as well as other keys returned by each command.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Status</code></p></td><td><p>String</p></td><td><p>Status. Legal values are described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW31" data-renderer-version="1">Table 1</a></span>.</p></td></tr><tr><td scope="row"><p><code>UDID</code></p></td><td><p>String</p></td><td><p>UDID of the device.</p></td></tr><tr><td scope="row"><p><code>CommandUUID</code></p></td><td><p>String</p></td><td><p>UUID of the command that this response is for (if any).</p></td></tr><tr><td scope="row"><p><code>ErrorChain</code></p></td><td><p>Array</p></td><td><p>Optional. Array of dictionaries representing the chain of errors that occurred. The content of these dictionaries is described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW33" data-renderer-version="1">Table 2</a></span>.</p></td></tr></table></div><p>The <code>Status</code> key contains one of the following strings:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW31" title="Table 1MDM status codes"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 1</strong>&nbsp;&nbsp;MDM status codes</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Status value</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Description</p></th></tr><tr><td scope="row"> <p><code>Acknowledged</code></p> </td><td><p>Everything went well.</p></td></tr><tr><td scope="row"> <p><code>Error</code></p> </td><td><p>An error has occurred. See the <code>ErrorChain</code> array for details.</p></td></tr><tr><td scope="row"> <p><code>CommandFormatError</code></p>  </td><td><p>A protocol error has occurred. The command may be malformed.</p></td></tr><tr><td scope="row"> <p><code>Idle</code></p> </td><td><p>The device is idle (there is no status).</p></td></tr><tr><td scope="row"> <p><code>NotNow</code></p> </td><td><p>The device received the command, but cannot perform it at this time. It will poll the server again in the future. For details, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW34" data-renderer-version="1">Error Handling</a></span>.</p></td></tr></table></div>

<p>The <code>ErrorChain</code> key contains an array. The first item is the top-level error. Subsequent items in the array are the underlying errors that led up to that top-level error.</p><p>Each entry in the <code>ErrorChain</code> array contains the following dictionary:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW33" title="Table 2ErrorChain array dictionary keys"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 2</strong>&nbsp;&nbsp;ErrorChain array dictionary keys</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>LocalizedDescription</code></p></td><td><p>String</p></td><td><p>Description of the error in the device’s localized language.</p></td></tr><tr><td scope="row"><p><code>USEnglishDescription</code></p></td><td><p>String</p></td><td><p>Optional. Description of the error in US English.</p></td></tr><tr><td scope="row"><p><code>ErrorDomain</code></p></td><td><p>String</p></td><td><p>The error domain.</p></td></tr><tr><td scope="row"><p><code>ErrorCode</code></p></td><td><p>Number</p></td><td><p>The error code.</p></td></tr></table></div><p>The <code>ErrorDomain</code> and <code>ErrorCode</code> keys contain internal codes used by Apple that may be useful for diagnostics. Your host should not rely on these values, as they may change between software releases. However, for reference, the current codes are listed in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW77" data-renderer-version="1">Error Codes</a></span>.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW62" title="MDM Protocol Extensions"></a><h2 class="jump">MDM Protocol Extensions</h2>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW734" title="macOS Extensions"></a><h3 class="jump">macOS Extensions</h3>
<p>Unlike iOS clients, a macOS client on an MDM server enrolls devices and users as separate entities. macOS supports several extensions to the MDM protocol to allow managing the device and logged-in user independently. When enrolled in this manner, the MDM server receives requests for the device and for each logged-in user.</p>
<p>Device requests are sent from the <code>mdmclient</code> daemon, while user requests are sent from the <code>mdmclient</code> agent. If multiple users are logged in, there is one instance of an <code>mdmclient</code> agent for each logged-in user, and each may be sending requests concurrently in addition to device requests from the daemon.</p>
<p>Devices and users are assigned different push tokens. The server can use this difference to determine whether the device or a specific user is to contact the server with an Idle request.</p>
<p>To indicate that an MDM server supports both device and user connections, its MDM enrollment payload must contain the string <code>com.apple.mdm.per-user-connections</code>; see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW50" data-renderer-version="1">Structure of MDM Payloads</a></span>. The MDM enrollment profile should be delivered as any other manually-installed profile, but MDM promotes it to a device profile once it is installed. This will have the following consequences:</p>
<ul class="ul">
<li class="li"><p>The device will be managed.</p></li>
<li class="li"><p>The local user that installed the profile will be managed.</p></li>
<li class="li"><p>No other local users will be managed. The server will never get requests from a local user other than the one that installed the enrollment profile.</p></li>
<li class="li"><p>Network users logging into the device will be managed if the server responds successfully to their <code>UserAuthenticate</code> messages. If the server does not want to manage a network client, it should return a <code>410</code> HTTP status code.</p></li>
</ul>
<p>During enrollment, the client sends the standard <code>Authenticate</code> request to the <code>CheckInURL</code> specified in the MDM payload. Once that request completes, the client sends one <code>TokenUpdate</code> request for the device and another for the user that performed the enrollment. The same client certificate is used to authenticate both device and user connections.</p>
<p>To help the server differentiate requests coming from a device versus a user, user requests contain additional keys in their request plists:</p>
<div class="codesample clear"><table><tr><td scope="row"><pre>      &#60;key&#62;UDID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;23EB7CD8-5567-5E97-827F-06E4E4C456B2&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;F17C470A-3ADC-47EC-A7CC-D432867F4793&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserLongName&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;Jimmy Smith&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserShortName&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;jimmys&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;NeedSyncResponse&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;boolean&#62;true&#60;/boolean&#62;<span></span></pre></td></tr></table></div>
<p>Note the following conditions for including the foregoing keys:</p>
<ul class="ul">
<li class="li"><p>Requests from a device contain only the <code>UDID</code> key.</p></li>
<li class="li"><p><code>NeedSyncResponse</code> is optional. If it is present and true, it indicates that the client is in a state where the user is waiting for the completion of an MDM transaction. In macOS 10.9 and later versions, this key is added during user login when the login is blocked while the client checks in with the MDM server to ensure it has the latest settings and profiles. The key is meant as a hint to the server that it should send all commands in the current set of Idle/Acknowledged/Error transactions instead of relying on push notifications. During login, the client blocks the transaction only until the server sends an empty response to an Idle/Acknowledged/Error sequence.</p></li>

<li class="li"><p><code>UserConfiguration</code> is optional. If it is present and true, it indicates that the macOS client is trying to obtain user-specific settings while in Setup Assistant during Device Enrollment (see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html#//apple_ref/doc/uid/TP40017387-CH7-SW1" data-renderer-version="1">Device Enrollment Program</a></span>). After a macOS client obtains device-specific settings, it also attempts to determine if the server has any user-specific settings that may affect Setup Assistant. Currently, only password policies fall into this category. The password policies are used if Setup Assistant prompts to create a local user account. After the client receives a DeviceConfigured command on the device connection, it starts a normal Idle/Acknowledged/Error connection on the user connection. If the server sends commands or profiles during this time, nothing the client receives persists, because the user account hasn’t been created on the system yet. The client always responds <code>NotNow</code> to any commands it received during this time. It continues to respond with <code>NotNow</code> until it receives a reply with no additional commands (an empty body) or a <code>DeviceConfigured</code> command on the user connection. The client passes any password policies to Setup Assistant and discards everything else. After Setup Assistant creates the user account and the user logs in, the client initiates a new series of Idle/Acknowledged/Error connections. The server should then resend all commands and profiles. The client processes them normally and they will persist.</p></li>
</ul>
</section>



<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW736" title="Network User Authentication Extensions"></a><h3 class="jump">Network User Authentication Extensions</h3>
<p>To support environments where a macOS computer is bound to an Open Directory server and various network users may log in, extensions to the MDM protocol were developed to identify and authenticate the network user logging in. This way, network users are also managed by the MDM server via their user profiles.</p>
<p>At login time, if the user is a network user or has a mobile home, the MDM client issues a request to the server to authenticate the current user to the MDM server and obtain an <code>AuthToken</code> value that is used in subsequent requests made by this user to the server.</p><p>The authentication happens using a transaction similar in structure to existing transactions with the server, as an HTTP <code>PUT</code> request to the <code>CheckInURL</code> address specified in the MDM payload.</p><p>The first request to the server is sent to the <code>CheckInURL</code> specified in the MDM payload, with the same identity used for all other MDM requests. The message body contains a property list with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>MessageType</code></p></td><td><p>String</p></td><td><p><code>UserAuthenticate</code>.</p></td></tr><tr><td scope="row"><p><code>UDID</code></p></td><td><p>String</p></td><td><p>UDID used on all MDM requests.</p></td></tr><tr><td scope="row"><p><code>UserID</code></p></td><td><p>String</p></td><td><p>Local user’s GUID, or  network user’s GUID from Open Directory Record (see below).</p></td></tr></table></div>

<p>If the macOS device being enrolled has an owner, the <code>UserID</code> key may designate a local user instead of a network user. If the local request succeeds, an <code>-MDM-is-owned</code> header is added to the response to all requests to the <code>checkinURL</code>, except <code>CheckOut</code> requests where it is optional. To this header may be added a value of 1 to indicate the device is owned; this is also the default behavior if the header is omitted. Only if the header is present with a value of 0 will requests from the client be optimized.</p>

<p>The response from the server should contain a dictionary with:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>DigestChallenge</code></p></td><td><p>String</p></td><td><p><code>Standard HTTP Digest</code>.</p></td></tr></table></div><p>If the server provides a <code>200</code> response but a zero-length <code>DigestChallenge</code> value, the server does not require any AuthToken to be generated for this user.</p><p>Otherwise, with a <code>200</code> response and <code>DigestChallenge</code> value that is non-empty, the client generates a digest from the user’s shortname, the user’s clear-text password, and the <code>DigestChallenge</code> value obtained from the server. The resulting digest is sent in a second request to the server, which validates the response and returns an <code>AuthToken</code> value that is sent on subsequent requests to the server.</p>
<p>If the server does not want to manage this user, it should return a <code>410</code> HTTP status code. The client will not make any additional requests to the server on behalf of this user for the duration of this login session. The next time that user logs in, however, the client will again send a <code>UserAuthenticate</code> request and the server can optionally return <code>410</code> again.</p>
<p>The second request to the server is also sent to the <code>CheckInURL</code> specified in the MDM payload and sent with the same identity used for all other MDM requests. The message body contains:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>MessageType</code></p></td><td><p>String</p></td><td><p><code>UserAuthenticate</code>.</p></td></tr><tr><td scope="row"><p><code>UDID</code></p></td><td><p>String</p></td><td><p>UDID used on all MDM requests.</p></td></tr><tr><td scope="row"><p><code>UserID</code></p></td><td><p>String</p></td><td><p>User’s GUID from Open Directory Record.</p></td></tr><tr><td scope="row"><p><code>DigestResponse</code></p></td><td><p>String</p></td><td><p>Obtained from generating digest above.</p></td></tr></table></div><p>The response from the server should contain a dictionary with:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>AuthToken</code></p></td><td><p>String</p></td><td><p>The token used for authentication.</p></td></tr></table></div><p>If the server responds with a <code>200</code> response and a non-empty <code>AuthToken</code> value is present, the <code>AuthToken</code> value is sent to the server on subsequent requests. The <code>AuthToken</code> value is included in the message body of subsequent requests along with the additional keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Value</p></th></tr><tr><td scope="row"><p><code>UDID</code></p></td><td><p>String</p></td><td><p>Device ID.</p></td></tr><tr><td scope="row"><p><code>UserID</code></p></td><td><p>String</p></td><td><p>GUID attribute from the user’s Open Directory record.</p></td></tr><tr><td scope="row"><p><code>UserShortName</code></p></td><td><p>String</p></td><td><p>Record name from user’s Open Directory record.</p></td></tr><tr><td scope="row"><p><code>UserLongName</code></p></td><td><p>String</p></td><td><p>Full name from user’s Open Directory record.</p></td></tr><tr><td scope="row"><p><code>AuthToken</code></p></td><td><p>String</p></td><td><p>Token obtained from above.</p></td></tr></table></div>
<p>It is assumed that the <code>AuthToken</code> remains valid until the next time the client sends a <code>UserAuthenticate</code> request. The client initiates a <code>UserAuthenticate</code> handshake each time a network user logs in.</p>
<p>If the server rejects the <code>DigestResponse</code> value because of an invalid password, it returns a <code>200</code> response and an empty <code>AuthToken</code> value.</p>
<p>The following is an example of a <code>UserAuthenticate</code> handshake:</p>
<div class="codesample clear"><table><tr><td scope="row"><pre>// UserAuthenticate request from client to server:<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;MessageType&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;UserAuthenticate&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UDID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;23EB7CD8-5567-5E97-827F-06E4E4C456B2&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;16C0477E-EB2F-4B5E-AAFD-92B2B91C4B16&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Server sends challenge:<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;DigestChallenge&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;Digest nonce="8BrAkk4GZgrG//<span></span></pre></td></tr><tr><td scope="row"><pre>            2XaDLMSSSo89VenjV5E8Se73z98RvSW7Rs",realm="fusion.home"&#60;string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Client sends response:<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;DigestResponse&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;Digest username="net1",realm="fusion.home",<span></span></pre></td></tr><tr><td scope="row"><pre>            nonce="8BrAkk4GZgrG2XaDLMSSSo89VenjV5E8Se73z98RvSW7Rs",<span></span></pre></td></tr><tr><td scope="row"><pre>            uri="/",response="84db40bbaf5e0d49cabb0ef7d8cac369"&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;MessageType&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;UserAuthenticate&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UDID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;23EB7CD8-5567-5E97-827F-06E4E4C456B2&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;16C0477E-EB2F-4B5E-AAFD-92B2B91C4B16&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Server responds with AuthToken for client session:<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;key&#62;AuthToken&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;string&#62;uEOcQRJrXGbMJUDAkDZSCny5e90=&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// From this point on, all user requests from that network user will include an AuthToken key:<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;AuthToken&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;uEOcQRJrXGbMJUDAkDZSCny5e90=&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;Status&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;Idle&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UDID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;23EB7CD8-5567-5E97-827F-06E4E4C456B2&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;16C0477E-EB2F-4B5E-AAFD-92B2B91C4B16&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserLongName&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;Net One&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;key&#62;UserShortName&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>      &#60;string&#62;net1&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr></table></div>
<p>For push notifications, the client uses different push tokens for device and user connections. Each token is sent to the server using the <code>TokenUpdate</code> request. The server can tell for whom the token is intended based on the <code>UDID</code> and <code>UserID</code> values in the request. If the user is a network/mobile user, the <code>AuthToken</code> is provided.</p><div class="warningbox clear"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_8" title="Warning"></a><p><strong>Warning:</strong>&nbsp;These push tokens should not be confused with the “AuthToken” mentioned above.</p><p></p><div class="clear"></div></aside></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW659" title="iOS Support for Per-User Connections"></a><h3 class="jump">iOS Support for Per-User Connections</h3>
<p>A device running iOS 9.3 or later, and its logged-in users, can be managed independently as a Shared iPad, using a technique similar to <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW736" data-renderer-version="1">Network User Authentication Extensions</a></span>. The device and its users are assigned different push tokens. The server can use this difference to determine whether the device or a specific user is to contact the server with an <code>Idle</code> request.</p>
<p>In general, the following types of MDM commands can be sent on the user channel:</p>
<ul class="simple">
<li><p><code>
kMCMDMPRequestTypeProfileList</code></p></li>
<li><p><code>
kMCMDMPRequestTypeInstallProfile</code></p></li>
<li><p><code>
kMCMDMPRequestTypeRemoveProfile</code></p></li>
<li><p><code>
kMCMDMPRequestTypeRestrictions</code></p></li>
<li><p><code>
kMCMDMPRequestTypeInviteToProgram</code></p></li>
<li><p><code>
kMCMDMPRequestTypeDeviceInformation</code></p></li>
</ul>
<p>To indicate that an MDM server supports both device and user connections, the <code>ServerCapabilities</code> array in its MDM enrollment payload must contain the string <code>com.apple.mdm.per-user-connections</code>, indicating support for Shared iPad. Then when a user logs in, the device sends a <code>TokenUpdate</code> request on the user channel.</p>
<p>To help the server differentiate requests coming from a device versus a user, user requests must contain additional keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>UserID</code></p></td><td><p>String</p></td><td><p>Always set to <code>FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF</code> to indicate that no authentication will occur.</p></td></tr>
<tr><td scope="row"><p><code>UserLongName</code></p></td><td><p>String</p></td><td><p>The full name of the user.</p></td></tr>
<tr><td scope="row"><p><code>UserShortName</code></p></td><td><p>String</p></td><td><p>The Managed Apple ID of the user.</p></td></tr>
</table></div>
<p>If the server is configured to manage the user, it stores the user push token and returns a 200 response. At this point the device polls the server for a command on the user channel.</p>
<p>If the server is not configured to manage the user, it should return a 410 HTTP status code. The client will not make any additional requests to the server on behalf of this user for the duration of the login session. The next time the user logs in, however, the client will again send a <code>UserAuthenticate</code> request and the server can optionally return a 410 code again.</p>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW34" title="Error Handling"></a><h2 class="jump">Error Handling</h2>


<p>There are certain times when the device is not able to do what the server requests. For example, databases cannot be modified while the device is locked with Data Protection. When a device cannot perform a command due to situations like this, it sends a <code>NotNow</code> status without performing the command. The server may send another command immediately after receiving this status. See “Handling a NotNow Response,” below, for more details.</p>

<p>The following commands are guaranteed to execute in iOS, and never return <code>NotNow</code>:</p>
<ul class="ul"><li class="li"><p><code>DeviceInformation</code></p></li><li class="li"><p><code>ProfileList</code></p></li><li class="li"><p><code>DeviceLock</code></p></li><li class="li"><p><code>EraseDevice</code></p></li><li class="li"><p><code>ClearPasscode</code></p></li><li class="li"><p><code>CertificateList</code></p></li><li class="li"><p><code>ProvisioningProfileList</code></p></li><li class="li"><p><code>InstalledApplicationList</code></p></li><li class="li"><p><code>Restrictions</code></p></li></ul><p>The macOS MDM client may respond with <code>NotNow</code> when:</p><ul class="ul"><li class="li"><p>The system is in Power Nap (dark wake) and a command other than <code>DeviceLock</code> or <code>EraseDevice</code> is received.</p></li><li class="li"><p>An <code>InstallProfile</code> or <code>RemoveProfile</code> request is made on the user connection and the user’s keychain is locked.</p></li></ul>
<p>In macOS, the client may respond with <code>NotNow</code> if it is blocking the user’s login while it contacts the server, and if the server sends a request that may take a long time to answer (such as <code>InstalledApplicationList</code> or <code>DeviceInformation</code>).</p>


</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW406" title="Handling a NotNow Response"></a><h2 class="jump">Handling a NotNow Response</h2>
<p>If the device’s response to the previous command sent has a status of <code>NotNow</code>, your server has two response choices:</p>
<ul class="ul">
<li class="li"><p>It may immediately stop sending commands to the device. In this case the device automatically polls your server when conditions change and it is able to process the last requested command. The server does not need to send another push notification in response to this status. However, the server may send another push notification to the device to have it poll the server immediately. The device does not cache the command that was refused. If the server wants the device to retry the command, it must send the command again when the device polls the server.</p></li>
<li class="li"><p>It may send another command on the same connection, but if this new command returns anything other than a <code>NotNow</code> response, the device will <em>not</em> automatically poll the server as it would have with the first response choice. The server must send a push notification at a later time to make the device reconnect. The device polls the server in response to a <code>NotNow</code> status only if that is the last status sent by the device to the server.</p></li>
</ul>

<p>The three example flowcharts below illustrate the foregoing choices.</p>

<p><strong>Example 1:</strong> The final command results in the server receiving a <code>NotNow</code> response. The device will poll the server later, when the <code>InstallApplication</code> command might succeed.</p>

<figure class="figure">
<img src="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/Art/NotNow1_2x.png" alt="../Art/NotNow1_2x.png" width="407" height="400">
</figure>

<p><strong>Example 2:</strong> The final command results in the server receiving something other than a <code>NotNow</code> response. The device will not poll the server later, because the last response was not <code>NotNow</code>.</p>

<figure class="figure">
<img src="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/Art/NotNow2_2x.png" alt="../Art/NotNow2_2x.png" width="407" height="322">
</figure>

<p><strong>Example 3:</strong> The connection to the device is unexpectedly interrupted. Because the last status the server received was not <code>NotNow</code>, the server should send a push notification to the device to retry the <code>InstallApplication</code> command. The server must not assume that the device will automatically poll the server later.</p>

<figure class="figure">
<img src="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/Art/NotNow3_2x.png" alt="../Art/NotNow3_2x.png" width="454" height="357">
</figure>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW6" title="Request Types"></a><h2 class="jump">Request Types</h2>
<p>This section describes the MDM protocol request types for Apple devices that run iOS. Support for the equivalent request types used with Apple computers that run macOS is summarized in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW901" data-renderer-version="1">Support for macOS Requests</a></span>.</p>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW7" title="ProfileList Commands Return a List of Installed Profiles"></a>
<h3 class="jump">ProfileList Commands Return a List of Installed Profiles</h3><p>To send a <code>ProfileList</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>ProfileList</code>.</p> </td></tr></table></div><p>The device replies with a property list that contains the following key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ProfileList</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries. Each entry describes an installed profile.</p></td></tr></table></div><p>Each entry in the <code>ProfileList</code> array contains a dictionary with a profile. For more information about profiles, see <em><a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206" data-renderer-version="1" target="_self">Configuration Profile Reference</a></em>.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW42" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;<code>ProfileList</code> queries are available only if the MDM host has an Inspect Profile Manifest access right.</p><p></p></aside></div>
<p>If you want to update a profile in place by installing a new one where there is already an existing one, follow these rules:</p>
<ul class="ul">
<li class="li"><p>The new MDM profile must be signed with the same identity as the existing profile.</p></li>
<li class="li"><p>You cannot change the topic or server URL of the profile.</p></li>
<li class="li"><p>You cannot add rights to a profile that replaces an existing one.</p></li>
</ul>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW8" title="InstallProfile Commands Install a Configuration Profile"></a>
<h3 class="jump">InstallProfile Commands Install a Configuration Profile</h3>
<p>The profile to install may be encrypted using any installed device identity certificate. The profile may also be signed.</p><p>To send an <code>InstallProfile</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>InstallProfile</code></p> </td></tr><tr><td scope="row"><p><code>Payload</code></p></td><td><p>Data</p></td><td><p>The profile to install. May be signed and/or encrypted for any identity installed on the device.</p></td></tr></table></div><p>Note that in the definition of the InstallProfile command, the Payload is of type Data, meaning that the entire Payload must be base64-encoded, including the XML headers. This is true for any Data type items in a property list. See <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/PropertyLists/UnderstandXMLPlist/UnderstandXMLPlist.html#//apple_ref/doc/uid/10000048i-CH6" data-renderer-version="1" target="_self">Understanding XML Property Lists</a></span> in <em><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048i" data-renderer-version="1" target="_self">Property List Programming Guide</a></em> for more information.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW43" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This query is available only if the MDM host has a Profile Installation and Removal access right.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW9" title="RemoveProfile Commands Remove a Profile from the Device"></a>
<h3 class="jump">RemoveProfile Commands Remove a Profile from the Device</h3><p>By sending the <code>RemoveProfile</code> command, the server can ask the device to remove any profile originally installed through MDM.</p><p>To send a <code>RemoveProfile</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>RemoveProfile</code>.</p> </td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The <code>PayloadIdentifier</code> value for the profile to remove.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW44" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This query is available only if the MDM host has a Profile Installation and Removal access right.</p><p></p></aside></div>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW10" title="ProvisioningProfileList Commands Get a List of Installed Provisioning Profiles"></a>
<h3 class="jump">ProvisioningProfileList Commands Get a List of Installed Provisioning Profiles</h3>
<p>To send a <code>ProvisioningProfileList</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>ProvisioningProfileList</code>.</p> </td></tr></table></div><p>The device replies with:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ProvisioningProfileList</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries. Each entry describes one provisioning profile.</p></td></tr></table></div><p>Each entry in the <code>ProvisioningProfileList</code> array contains the following dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Name</code></p></td><td><p>String</p></td><td><p>The display name of the profile.</p></td></tr><tr><td scope="row"><p><code>UUID</code></p></td><td><p>String</p></td><td><p>The UUID of the profile.</p></td></tr><tr><td scope="row"><p><code>ExpiryDate</code></p></td><td><p>Date</p></td><td><p>The expiry date of the profile.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW45" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This query is available only if the MDM host has an Inspect Provisioning Profiles access right.</p><p></p></aside></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW64" title="Note"></a><p><strong>Note:</strong>&nbsp;The macOS MDM client responds with an empty <code>ProvisioningProfileList</code> array.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW11" title="InstallProvisioningProfile Commands Install Provisioning Profiles"></a>
<h3 class="jump">InstallProvisioningProfile Commands Install Provisioning Profiles</h3><p>To send an <code>InstallProvisioningProfile</code> command to an iOS device, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>InstallProvisioningProfile</code></p> </td></tr><tr><td scope="row"><p><code>ProvisioningProfile</code></p></td><td><p>Data</p></td><td><p>The provisioning profile to install.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW35" title="Note"></a><p><strong>Note:</strong>&nbsp;No error occurs if the specified provisioning profile is already installed.</p><p></p></aside></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW46" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This query is available only if the MDM host has a Provisioning Profile Installation and Removal access right.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW12" title="RemoveProvisioningProfile Commands Remove Installed Provisioning Profiles"></a>
<h3 class="jump">RemoveProvisioningProfile Commands Remove Installed Provisioning Profiles</h3><p>To send a <code>RemoveProvisioningProfile</code> command to an iOS device, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>RemoveProvisioningProfile</code></p> </td></tr><tr><td scope="row"><p><code>UUID</code></p></td><td><p>String</p></td><td><p>The UUID of the provisioning profile to remove.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW47" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This query is available only if the MDM host has a Provisioning Profile Installation and Removal access right.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW13" title="CertificateList Commands Get a List of Installed Certificates"></a>
<h3 class="jump">CertificateList Commands Get a List of Installed Certificates</h3><p>To send a <code>CertificateList</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>CertificateList</code></p> </td></tr></table></div><p>The device replies with:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>CertificateList</code></p></td><td><p>Array</p></td><td><p>Array of certificate dictionaries. The dictionary format is described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW27" data-renderer-version="1">Table 3</a></span>.</p></td></tr></table></div><p>Each entry in the <code>CertificateList</code> array is a dictionary containing the following fields:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW27" title="Table 3Certificate dictionary keys"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 3</strong>&nbsp;&nbsp;Certificate dictionary keys</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>CommonName</code></p></td><td><p>String</p></td><td><p>Common name of the certificate.</p></td></tr><tr><td scope="row"><p><code>IsIdentity</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if this is an identity certificate.</p></td></tr><tr><td scope="row"><p><code>Data</code></p></td><td><p>Data</p></td><td><p>The certificate in DER-encoded X.509 format.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW36" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>CertificateList</code> command requires that the server have the Inspect Profile Manifest privilege.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW14" title="InstalledApplicationList Commands Get a List of Third-Party Applications"></a>
<h3 class="jump">InstalledApplicationList Commands Get a List of Third-Party Applications</h3><p>To send an <code>InstalledApplicationList</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>InstalledApplicationList</code>.</p> </td></tr><tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array</p></td><td><p>Optional. An array of app identifiers as strings. If provided, the response contains only the status of apps whose identifiers appear in this array. </p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>ManagedAppsOnly</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, only managed app identifiers are returned. </p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr></table></div><p>The device replies with:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>InstalledApplicationList</code></p></td><td><p>Array</p></td><td><p>Array of installed applications. Each entry is a dictionary as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW28" data-renderer-version="1">Table 4</a></span>.</p></td></tr></table></div><p>Each entry in the <code>InstalledApplicationList</code> is a dictionary containing the following keys:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW28" title="Table 4InstalledApplicationList dictionary keys"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 4</strong>&nbsp;&nbsp;InstalledApplicationList dictionary keys</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s ID.</p></td></tr><tr><td scope="row"><p><code>Version</code></p></td><td><p>String</p></td><td><p>The application’s version.</p></td></tr><tr><td scope="row"><p><code>ShortVersion</code></p></td><td><p>String</p></td><td><p>The application’s short version.</p><p><strong>Availability:</strong> Available in iOS 5.0 and later.</p></td></tr><tr><td scope="row"><p><code>Name</code></p></td><td><p>String</p></td><td><p>The application’s name.</p></td></tr><tr><td scope="row"><p><code>BundleSize</code></p></td><td><p>Integer</p></td><td><p>The app’s static bundle size, in bytes.</p></td></tr>
<tr><td scope="row"><p><code>DynamicSize</code></p></td>
<td><p>Integer</p></td>
<td><p>The size of the app’s document, library, and other folders, in bytes.</p>
<p><strong>Availability:</strong> Available in iOS 5.0 and later.</p>
</td></tr>
<tr>
<td scope="row"><p><code>IsValidated</code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code>true</code>, the app has validated as allowed to run and is able to run on the device. If an app is enterprise-distributed and is not validated, it will not run on the device until validated.</p>
<p><strong>Availability:</strong> Available in iOS 9.2 and later.</p></td>
</tr><tr><td scope="row"><p><code>ExternalVersionIdentifier</code></p></td><td><p>String</p></td><td><p>The application’s external version ID. It can be used for comparison in the iTunes Search API to decide if the application needs to be updated.</p><p><strong>Availability:</strong> Available in iOS 11 and later.</p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW15" title="DeviceInformation Commands Get Information About the Device"></a>
<h3 class="jump">DeviceInformation Commands Get Information About the Device</h3><p>To send a <code>DeviceInformation</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>DeviceInformation</code></p> </td></tr><tr><td scope="row"><p><code>Queries</code></p></td><td><p>Array</p></td><td><p>Array of strings. Each string is a value from <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW24" data-renderer-version="1">Table 5</a></span>, <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW25" data-renderer-version="1">Table 7</a></span>, or <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW26" data-renderer-version="1">Table 9</a></span>.</p></td></tr></table></div><p>The device replies with:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>QueryResponses</code></p></td><td><p>Dictionary</p></td><td><p>Contains a series of key-value pairs. Each key is a query string from <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW24" data-renderer-version="1">Table 5</a></span>, <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW25" data-renderer-version="1">Table 7</a></span>, or <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW26" data-renderer-version="1">Table 9</a></span>. The associated value is the response for that query.</p></td></tr></table></div><p>Queries for which the device has no response or that are not permitted by the MDM host’s access rights are dropped from the response dictionary.</p>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW16" title="General Queries Are Always Available"></a>
<h4 class="jump">General Queries Are Always Available</h4>
<p>The queries described in <span class="content_text">Table 5</span> are available without any special access rights:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW24" title="Table 5General queries"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 5</strong>&nbsp;&nbsp;General queries</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Query</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Reply Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Comment</p></th></tr><tr><td scope="row"><p><code>UDID</code></p></td><td><p>String</p></td><td><p>The unique device identifier (UDID) of the device.</p> </td></tr><tr><td scope="row"><p><code>Languages</code></p></td><td><p>Array</p></td><td><p>Array of strings. The first entry in this array indicates the current language. <strong>Availability:</strong> Available in Apple TV software 6.0 and later. Supported in macOS 10.10 and 10.11 but will be removed in a future macOS release.</p></td></tr><tr><td scope="row"><p><code>Locales</code></p></td><td><p>String</p></td><td><p>Array of strings. The first entry in this array indicates the current locale. <strong>Availability:</strong> Available in Apple TV software 6.0 and later. Supported in macOS 10.10 and 10.11 but will be removed in a future macOS release.</p></td></tr><tr><td scope="row"><p><code>DeviceID</code></p></td><td><p>String</p></td><td><p>The Apple TV device ID. Available in iOS 7 (Apple TV software 6.0) and later, on Apple TV only.</p></td></tr>
<tr><td scope="row"><p><code>OrganizationInfo</code></p></td><td><p>Dictionary</p></td><td><p>The contents (if any) of a previously set <code>OrganizationInfo</code> setting. Available in iOS 7 and later.</p></td></tr>
<tr><td scope="row"><p><code>LastCloudBackupDate</code></p></td><td><p>Date</p></td><td><p>The date of the last iCloud backup. <strong>Availability:</strong> Available in iOS 8.0 and later.</p></td></tr>

<tr><td scope="row"><p><code>AwaitingConfiguration</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, device is still waiting for a DeviceConfigured message from MDM to continue through Setup Assistant. <strong>Availability:</strong> Available in iOS 9 and later and the response is only generated by devices enrolled in MDM via DEP (see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html#//apple_ref/doc/uid/TP40017387-CH7-SW1" data-renderer-version="1">Device Enrollment Program</a></span>).</p></td></tr>

<tr>
<td scope="row"><p><code>AutoSetupAdminAccounts</code></p></td><td><p>Array of Dictionaries</p></td><td><p>Returns the local admin users (if any) created automatically by Setup Assistant during DEP enrollment via the <code>AccountConfiguration</code> command. <strong>Availability:</strong> Available in macOS 10.11 and later and the response is only generated by devices enrolled in MDM via DEP (see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html#//apple_ref/doc/uid/TP40017387-CH7-SW1" data-renderer-version="1">Device Enrollment Program</a></span>).</p>
<p>Each dictionary in the array contains two keys: a key <code>GUID</code> with a string value of the Global Unique Identifier of a local admin account, and a key <code>shortName</code> with a string value of the short name of the admin account.</p>
</td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW71" title="iTunesStoreAccountIsActive Commands Tell Whether an iTunes Account Is Logged In"></a><h4 class="jump">iTunesStoreAccountIsActive Commands Tell Whether an iTunes Account Is Logged In</h4><p>The queries in <span class="content_text">Table 6</span> are available if the MDM host has an Install Applications access right:</p><a name="//apple_ref/doc/uid/TP40017387-CH3-SW70" title="Table 6iTunes Store account queries"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 6</strong>&nbsp;&nbsp;iTunes Store account queries</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Query</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Reply Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>iTunesStoreAccountIsActive</code></p></td><td><p>Boolean</p></td><td><p><code>true</code> if the user is currently logged into an active iTunes Store account. Available in iOS 7 and later and in macOS 10.9.</p></td></tr>
<tr><td scope="row"><p><code>iTunesStoreAccountHash</code></p></td><td><p>String</p></td><td><p>Returns a hash of the iTunes Store account currently logged in. This string is identical to the <code>itsIdHash</code> returned by the VPP App Assignment web service. <strong>Availability:</strong> Available in iOS 8.0 and later and macOS 10.10 and later.</p></td></tr>
</table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW17" title="Device Information Queries Provide Information About the Device"></a>
<h4 class="jump">Device Information Queries Provide Information About the Device</h4>
<p>The queries in <span class="content_text">Table 7</span> are available if the MDM host has a Device Information access right:</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW25" title="Table 7Device information queries"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 7</strong>&nbsp;&nbsp;Device information queries</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Query</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Reply Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Comment</p></th></tr><tr><td scope="row"><p><code>DeviceName</code></p></td><td><p>String</p></td><td><p>The iOS device name or the macOS hostname.</p></td></tr><tr><td scope="row"><p><code>OSVersion</code></p></td><td><p>String</p></td><td><p>The version of iOS the device is running.</p></td></tr><tr><td scope="row"><p><code>BuildVersion</code></p></td><td><p>String</p></td><td><p>The build number (8A260b, for example).</p></td></tr><tr><td scope="row"><p><code>ModelName</code></p></td><td><p>String</p></td><td><p>Name of the device model, e.g., “MacBook Pro.”</p></td></tr><tr><td scope="row"><p><code>Model</code></p></td><td><p>String</p></td><td><p>The device’s model number (<code>MC319LL</code>, for example).</p></td></tr><tr><td scope="row"><p><code>ProductName</code></p></td><td><p>String</p></td><td><p>The model code for the device (iPhone3,1, for example).</p></td></tr><tr><td scope="row"><p><code>SerialNumber</code></p></td><td><p>String</p></td><td><p>The device’s serial number.</p></td></tr><tr><td scope="row"><p><code>DeviceCapacity</code></p></td><td><p>Number</p></td><td><p>Floating-point gigabytes (base-1024 gigabytes).</p></td></tr><tr><td scope="row"><p><code>AvailableDeviceCapacity</code></p></td><td><p>Number</p></td><td><p>Floating-point gigabytes (base-1024 gigabytes).</p></td></tr><tr><td scope="row"><p><code>BatteryLevel</code></p></td><td><p>Number</p></td><td><p>Floating-point percentage expressed as a value between 0.0 and 1.0, or -1.0 if battery level cannot be determined.</p><p><strong>Availability:</strong> Available in iOS 5.0 and later.</p></td></tr><tr><td scope="row"><p><code>CellularTechnology</code></p></td><td><p>Number</p></td><td><p>Returns the type of cellular technology.</p><ul class="simple"><li><p><code>0</code>: none</p></li><li><p><code>1</code>: GSM</p></li><li><p><code>2</code>: CDMA</p></li><li><p><code>3</code>: both</p></li></ul><p><strong>Availability: </strong>Available in iOS 4.2.6 and later.</p></td></tr><tr><td scope="row"><p><code>IMEI</code></p></td><td><p>String</p></td><td><p>The device’s IMEI number. Ignored if the device does not support GSM.</p><p><strong>Availability:</strong> Not supported in macOS.</p></td></tr><tr><td scope="row"><p><code>MEID</code></p></td><td><p>String</p></td><td><p>The device’s MEID number. Ignored if the device does not support CDMA.</p><p><strong>Availability:</strong> Not supported in macOS.</p></td></tr><tr><td scope="row"><p><code>ModemFirmwareVersion</code></p></td><td><p>String</p></td><td><p>The baseband firmware version.</p><p><strong>Availability:</strong> Not supported in macOS.</p></td></tr><tr><td scope="row"><p><code>IsSupervised</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the device is supervised.</p><p><strong>Availability:</strong> Available in iOS 6 and later.</p></td></tr><tr><td scope="row"><p><code>IsDeviceLocatorServiceEnabled</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the device has a device locator service (such as Find My iPhone) enabled.</p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>IsActivationLockEnabled</code></p></td><td><p>Boolean</p></td><td><p>If true, the device has Activation Lock enabled. <strong>Availability:</strong> Available in iOS 7 and later and macOS 10.9 and later.</p></td></tr><tr><td scope="row"><p><code>IsDoNotDisturbInEffect</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, Do Not Disturb is in effect. This returns <code>true</code> whenever Do Not Disturb is turned on, even if the device is not currently locked.</p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>DeviceID</code></p></td><td><p>String</p></td><td><p>Device ID.</p><p><strong>Availability:</strong> Available in Apple TV software 6.0 and later only.</p></td></tr>

<tr><td scope="row"><p><code>EASDeviceIdentifier</code></p></td><td><p>String</p></td><td><p>The Device Identifier string reported to Exchange Active Sync (EAS).</p><p><strong>Availability:</strong> Available in iOS 7 and later and macOS 10.9 and later.</p></td></tr>

<tr><td scope="row"><p><code>IsCloudBackupEnabled</code></p></td><td><p>Boolean</p></td><td><p>If true, the device has iCloud backup enabled.</p><p><strong>Availability:</strong> Available in iOS 7.1 and later.</p></td></tr>

<tr><td scope="row"><p><code>OSUpdateSettings</code></p></td><td><p>Dictionary</p></td><td><p>Returns the OS Update settings (see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW25a" data-renderer-version="1">Table 8</a></span>).</p><p><strong>Availability:</strong> Available in macOS 10.11 and later.</p></td></tr>



<tr><td scope="row"><p><code>LocalHostName</code></p></td><td><p>String</p></td><td><p>Returns the local host name as reported by Bonjour.</p><p><strong>Availability:</strong> Available in macOS 10.11 and later.</p></td></tr>
<tr><td scope="row"><p><code>HostName</code></p></td><td><p>String</p></td><td><p>Returns the host name.</p><p><strong>Availability:</strong> Available in macOS 10.11 and later.</p></td></tr>
<tr><td scope="row"><p><code>SystemIntegrityProtectionEnabled</code></p></td><td><p>Boolean</p></td><td><p>Whether System Integrity Protection is enabled on the device.</p><p><strong>Availability:</strong> Available in macOS 10.12 and later.</p></td></tr>
<tr><td scope="row">
<p><code>ActiveManagedUsers</code></p>
</td>
<td><p>Array of strings</p></td><td><p>Returns an array of the directory GUIDs (as strings) of the logged-in managed users. This query can be sent only to a device.</p>
<p>An additional key, <code>CurrentConsoleManagedUser</code>, is sent in the reply; its string value is the GUID of the managed user active on the console. If no user listed in the <code>ActiveManagedUsers</code> array is currently active on the console, this additional key is omitted from the reply.</p>



<p><strong>Availability:</strong> Available in macOS 10.11 and later.</p></td></tr>

<tr><td scope="row"><p><code>IsMDMLostModeEnabled</code></p></td><td><p>Boolean</p></td><td><p>If true, the device has MDM Lost Mode enabled. Defaults to false.</p><p><strong>Availability:</strong> Available in iOS 9.3 and later.</p></td></tr>

<tr><td scope="row"><p><code>MaximumResidentUsers</code></p></td><td><p>Integer</p></td><td><p>Returns the maximum number of users that can use this Shared iPad mode device.</p><p><strong>Availability:</strong> Available in iOS 9.3 and later.</p></td></tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40017387-CH3-SW25a" title="Table 8OS update settings"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 8</strong>&nbsp;&nbsp;OS update settings</caption>
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>CatalogURL</code></p></td><td><p>String</p></td><td><p>The URL to the software update catalog currently in use by the client.</p></td></tr>
<tr><td scope="row"><p><code>IsDefaultCatalog</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>PreviousScanDate</code></p></td><td><p>Date</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>PreviousScanResult</code></p></td><td><p>String</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>PerformPeriodicCheck</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>AutomaticCheckEnabled</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>BackgroundDownloadEnabled</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>AutomaticAppInstallationEnabled</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>AutomaticOSInstallationEnabled</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
<tr><td scope="row"><p><code>AutomaticSecurityUpdatesEnabled</code></p></td><td><p>Boolean</p></td><td><p> </p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW18" title="Network Information Queries Provide Hardware Addresses, Phone Number, and SIM Card and Cellular Network Info"></a>
<h4 class="jump">Network Information Queries Provide Hardware Addresses, Phone Number, and SIM Card and Cellular Network Info</h4>
<p>The queries in <span class="content_text">Table 9</span> are available if the MDM host has a Network Information access right.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW51" title="Note"></a><p><strong>Note:</strong>&nbsp;Not all devices understand all queries. For example, queries specific to GSM (IMEI, SIM card queries, and so on) are ignored if the device is not GSM-capable. The macOS MDM client responds only to <code>BluetoothMAC</code>, <code>WiFiMAC</code>, and <code>EthernetMACs</code>.</p><p></p></aside></div>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW26" title="Table 9Network information queries"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 9</strong>&nbsp;&nbsp;Network information queries</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Query</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Reply Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Comment</p></th></tr><tr><td scope="row"><p><code>ICCID</code></p></td><td><p>String</p></td><td><p>The ICC identifier for the installed SIM card.</p></td></tr><tr><td scope="row"><p><code>BluetoothMAC</code></p></td><td><p>String</p></td><td><p>Bluetooth MAC address.</p></td></tr><tr><td scope="row"><p><code>WiFiMAC</code></p></td><td><p>String</p></td><td><p>Wi-Fi MAC address.</p></td></tr><tr><td scope="row"><p><code>EthernetMACs</code></p></td><td><p>Array of strings</p></td><td><p>Ethernet MAC addresses.</p><p><strong>Availability:</strong> Available in macOS v10.8 and later, and in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>CurrentCarrierNetwork</code></p></td><td><p>String</p></td><td><p>Name of the current carrier network.</p></td></tr><tr><td scope="row"><p><code>SIMCarrierNetwork</code></p></td><td><p>String</p></td><td><p>Name of the home carrier network. (Note: this query <em>is</em> supported on CDMA in spite of its name.)</p></td></tr><tr><td scope="row"><p><code>SubscriberCarrierNetwork</code></p></td><td><p>String</p></td><td><p>Name of the home carrier network. (Replaces <code>SIMCarrierNetwork</code>.)</p><p><strong>Availability:</strong> Available in iOS 5.0 and later.</p></td></tr><tr><td scope="row"><p><code>CarrierSettingsVersion</code></p></td><td><p>String</p></td><td><p>Version of the currently-installed carrier settings file.</p></td></tr><tr><td scope="row"><p><code>PhoneNumber</code></p></td><td><p>String</p></td><td><p>Raw phone number without punctuation, including country code.</p></td></tr><tr><td scope="row"><p><code>VoiceRoamingEnabled</code></p></td><td><p>Boolean</p></td><td><p>The current setting of the Voice Roaming setting. This is only available on certain carriers.</p><p><strong>Availability:</strong> iOS 5.0 and later.</p></td></tr><tr><td scope="row"><p><code>DataRoamingEnabled</code></p></td><td><p>Boolean</p></td><td><p>The current setting of the Data Roaming setting.</p></td></tr><tr><td scope="row"><p><code>IsRoaming</code></p></td><td><p>Boolean</p></td><td><p>Returns whether the device is currently roaming.</p><p><strong>Availability: </strong>Available in iOS 4.2 and later. See note below.</p></td></tr><tr><td scope="row"><p><code>PersonalHotspotEnabled</code></p></td><td><p>Boolean</p></td><td><p>True if the Personal Hotspot feature is currently turned on. This value is available only with certain carriers.</p><p><strong>Availability:</strong> iOS 7.0 and later.</p></td></tr><tr><td scope="row"><p><code>SubscriberMCC</code></p></td><td><p>String</p></td><td><p>Home Mobile Country Code (numeric string).</p><p><strong>Availability: </strong>Available in iOS 4.2.6 and later.</p></td></tr><tr><td scope="row"><p><code>SubscriberMNC</code></p></td><td><p>String</p></td><td><p>Home Mobile Network Code (numeric string).</p><p><strong>Availability: </strong>Available in iOS 4.2.6 and later.</p></td></tr><tr><td scope="row"><p><code>CurrentMCC</code></p></td><td><p>String</p></td><td><p>Current Mobile Country Code (numeric string).</p></td></tr><tr><td scope="row"><p><code>CurrentMNC</code></p></td><td><p>String</p></td><td><p>Current Mobile Network Code (numeric string).</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW49" title="Note"></a><p><strong>Note:</strong>&nbsp;For older versions of iOS, if the <code>SIMMCC</code>/<code>SMMNC</code> combination does not match the <code>CurrentMCC</code>/<code>CurrentMNC</code> values, the device is probably roaming.</p><p></p></aside></div>
</section>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW19" title="SecurityInfo Commands Request Security-Related Information"></a>
<h3 class="jump">SecurityInfo Commands Request Security-Related Information</h3><p>To send a <code>SecurityInfo</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>SecurityInfo</code>.</p> </td></tr></table></div><p>Response:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>SecurityInfo</code></p></td><td><p>Dictionary</p></td><td><p>Response dictionary.</p></td></tr></table></div><p>In iOS only, the <code>SecurityInfo</code> dictionary contains the following keys and values:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>HardwareEncryptionCaps</code></p></td><td><p>Integer</p></td><td><p>Bitfield. Describes the underlying hardware encryption capabilities of the device. Values are described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW23" data-renderer-version="1">Table 10</a></span>.</p></td></tr><tr><td scope="row"><p><code>PasscodePresent</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the device is protected by a passcode.</p></td></tr><tr><td scope="row"><p><code>PasscodeCompliant</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the user’s passcode is compliant with all requirements on the device, including Exchange and other accounts.</p></td></tr>
<tr><td scope="row"><p><code>PasscodeCompliantWithProfiles</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the user’s passcode is compliant with requirements from profiles.</p></td></tr>

<tr><td scope="row"><p><code>PasscodeLockGracePeriodEnforced</code></p></td><td><p>Integer</p></td><td><p>The current enforced value for the amount of time in seconds the device must be locked before unlock will require the device passcode.</p></td></tr>
<tr><td scope="row"><p><code>FDE_Enabled</code></p></td><td><p>Boolean</p></td><td><p>Device channel only. Whether Full Disk Encryption (FDE) is enabled or not.</p><p><strong>Availability:</strong> Available in macOS 10.9 and later.</p></td></tr>
<tr><td scope="row"><p><code>FDE_HasPersonalRecoveryKey</code></p></td><td><p>Boolean</p></td><td><p>Device channel only. If FDE has been enabled, returns whether a personal recovery key has been set.</p><p><strong>Availability:</strong> Available in macOS 10.9 and later.</p></td></tr>
<tr><td scope="row"><p><code>FDE_HasInstitutionalRecoveryKey</code></p></td><td><p>Boolean</p></td><td><p>Device channel only. If FDE has been enabled, returns whether an institutional recovery key has been set.</p><p><strong>Availability:</strong> Available in macOS 10.9 and later.</p></td></tr>
<tr><td scope="row"><p><code>FDE_PersonalRecoveryKeyCMS</code></p></td><td><p>Data</p></td><td><p>If FileVault Personal Recovery Key (PRK) escrow is enabled and a recovery key has been set up, this key will contain the PRK encrypted with the certificate from the <code>com.apple.security.FDERecoveryKeyEscrow</code> payload and wrapped as a CMS blob.</p><p><strong>Availability:</strong> Available in macOS 10.13 and later.</p></td></tr>
<tr><td scope="row"><p><code>FDE_PersonalRecoveryKeyDeviceKey</code></p></td><td><p>String</p></td><td><p>If FileVault PRK escrow is enabled and a recovery key has been set up, this key contains a short string that is displayed to the user in the EFI login window as part of the help message if the user enters an incorrect password three times. The server can use this string as an index when saving the device PRK. Currently, this string is the device serial number, which replaces the <code>recordNumber</code> that was returned by the server in the earlier escrow mechanism.</p><p><strong>Availability:</strong> Available in macOS 10.13 and later.</p></td></tr>
<tr><td scope="row"><p><code>FirewallSettings</code></p></td><td><p>Dictionary</p></td><td><p>(macOS 10.12 and later): the current Firewall settings. This information will be returned only when the command is sent to the device channel. The response is a dictionary with the following keys:</p>
<ul class="threeHead">
<li class="li"><p><code>FirewallEnabled</code> (Boolean): Whether firewall is on or off.</p></li>
<li class="li"><p><code>BlockAllIncoming</code> (Boolean): Whether all incoming connections are blocked.</p></li>
<li class="li"><p><code>StealthMode</code> (Boolean): Whether stealth mode is enabled.</p></li>
<li class="li"><p><code>Applications</code> (array of dictionaries): Blocking status for specific applications. Each dictionary contains these keys:</p>
<ul class="nested">
<li class="nested li"><p><code>BundleID</code> (string) : identifies the application</p></li> <li class="nested li"><p><code>Allowed</code> (Boolean) : specifies whether or not incoming connections are allowed</p></li>
<li class="nested li"><p><code>Name</code> (string) : descriptive name of the application for display purposes only (may be missing if no corresponding app is found on the client computer).</p></li>
</ul>
</li>
</ul>
</td></tr>
<tr><td scope="row"><p><code>SystemIntegrityProtectionEnabled</code></p></td><td><p>Boolean</p></td><td><p>Device channel only. Whether System Integrity Protection is enabled on the device. In macOS 10.11 or later, this information may also be retrieved using a <code>DeviceInformation</code> query.</p><p><strong>Availability:</strong> Available in macOS 10.12 and later.</p> </td></tr>
<tr><td scope="row"><p><code>FirmwarePasswordStatus</code></p></td><td><p>Dictionary</p></td><td><p>State of EFI firmware password; see <span class="content_text">Table 11</span>.</p><p><strong>Availability:</strong> Available in macOS 10.13 and later.</p> </td></tr>
</table></div>



<p>Hardware encryption capabilities are described using the logical OR of the values in <span class="content_text">Table 10</span>. Bits set to <code>1</code> (one) indicate that the corresponding feature is present, enabled, or in effect.</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW23" title="Table 10HardwareEncryptionCaps bitfield values"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 10</strong>&nbsp;&nbsp;HardwareEncryptionCaps bitfield values</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Value</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Feature</p></th></tr><tr><td scope="row"><p><code>1</code></p></td><td><p>Block-level encryption.</p></td></tr><tr><td scope="row"><p><code>2</code></p></td><td><p>File-level encryption.</p></td></tr></table></div>

<p>EFI firmware status is returned as a dictionary that contains the fields listed below.</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW423" title="Table 11EFI firmware status values"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 11</strong>&nbsp;&nbsp;EFI firmware status values</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Value</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Description</p></th></tr>
<tr><td scope="row"><p><code>PasswordExists</code></p></td><td><p><code>Boolean</code></p></td><td><p>Whether an EFI firmware password is set or not.</p></td></tr>
<tr><td scope="row"><p><code>ChangePending</code></p></td><td><p><code>Boolean</code></p></td><td><p>If <code>true</code>, a firmware password change is pending and the device requires rebooting; attempts to set, change, or delete the password will fail.</p></td></tr>
<tr><td scope="row"><p><code>AllowOroms</code></p></td><td><p><code>Boolean</code></p></td><td><p>Whether or not option ROMs are enabled.</p></td></tr>
</table></div>

<p>For a device to be protected with Data Protection, <code>HardwareEncryptionCaps</code> must be <code>3</code>, and <code>PasscodePresent</code> must be <code>true</code>.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW37" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;Security queries are available only if the MDM host has a Security Query access right.</p><p></p></aside></div>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW20" title="DeviceLock Command Locks the Device Immediately"></a>
<h3 class="jump">DeviceLock Command Locks the Device Immediately</h3><p>The <code>DeviceLock</code> command is intended to lock lost devices remotely; it should not be used for other purposes. To send one, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>DeviceLock</code></p> </td></tr><tr><td scope="row"><p><code>PIN</code></p></td><td><p>String</p></td><td><p>The Find My Mac PIN. Must be 6 characters long.</p><p><strong>Availability:</strong> Available in macOS 10.8 and later.</p></td></tr><tr><td scope="row"><p><code>Message</code></p></td><td><p>String</p></td><td><p>Optional. If provided, this message is displayed on the lock screen and should contain the words “lost iPad.” Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>PhoneNumber</code></p></td><td><p>String</p></td><td><p>Optional. If provided, this phone number is displayed on the lock screen. Available in iOS 7 and later.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW38" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This command requires both Device Lock and Passcode Removal access rights.</p><p></p></aside></div>
<p>If a passcode has been set on the device, the device is locked and the text and phone number passed with the <code>DeviceLock</code> command are displayed on the locked screen. The device returns a <code>Status</code> of <code>Acknowledged</code> and a <code>MessageResult</code> of <code>Success</code>. If a passcode has not been set on the device, the device is locked but the message and phone number are not displayed on the screen. The device returns a <code>Status</code> of <code>Acknowledged</code> and a <code>MessageResult</code> of <code>NoPasscodeSet</code>.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW171" title="RestartDevice Commands Restart Devices"></a>
<h3 class="jump">RestartDevice Commands Restart Devices</h3>
<p>To send a <code>RestartDevice</code> command, the server sends the following key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>RestartDevice</code></p> </td></tr>
</table></div>
<p>This command is supervised only and requires the Device Lock access right. The device will restart immediately. Available in iOS 10.3 and later. Passcode-locked iOS devices do not rejoin Wi-Fi networks after restarting, so they may not be able to communicate with the server.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW172" title="ShutDownDevice Commands Shut Down Devices"></a>
<h3 class="jump">ShutDownDevice Commands Shut Down Devices</h3>
<p>To send a <code>ShutDownDevice</code> command, the server sends the following key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ShutDownDevice</code></p> </td></tr>
</table></div>
<p>This command is supervised only and requires the Device Lock access right. The device will shut down immediately. Available in iOS 10.3 and later.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW1" title="ClearPasscode Commands Clear the Passcode for a Device"></a>
<h3 class="jump">ClearPasscode Commands Clear the Passcode for a Device</h3><p>To send a <code>ClearPasscode</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>ClearPasscode</code></p> </td></tr><tr><td scope="row"><p><code>UnlockToken</code></p></td><td><p>Data</p></td><td><p>The <code>UnlockToken</code> value that the device provided in its <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/2-MDM_Check_In_Protocol/MDM_Check_In_Protocol..html#//apple_ref/doc/uid/TP40017387-CH4-SW1" data-renderer-version="1">TokenUpdate</a></span> check-in message.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW39" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This command requires both Device Lock and Passcode Removal access rights.</p><p></p></aside></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW66" title="Note"></a><p><strong>Note:</strong>&nbsp;The macOS MDM client generates an <code>Error</code> response to the server.</p><p></p></aside></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW21" title="EraseDevice Commands Remotely Erase a Device"></a>
<h3 class="jump">EraseDevice Commands Remotely Erase a Device</h3>
<p>Upon receiving this command, the device immediately erases itself. No warning is given to the user. This command is performed immediately even if the device is locked.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>EraseDevice</code></p> </td></tr><tr><td scope="row"><p><code>PIN</code></p></td><td><p>String</p></td><td><p>The Find My Mac PIN. Must be 6 characters long.</p><p><strong>Availability:</strong> Available in macOS 10.8 and later.</p></td></tr><tr><td scope="row"><p><code>PreserveDataPlan</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, and a data plan exists on the device, it will be preserved. Defaults to <code>false</code>.</p><p><strong>Availability:</strong> Available in iOS 11 and later.</p></td></tr></table></div><p>The device attempts to send a response to the server, but unlike other commands, the response cannot be resent if initial transmission fails. Even if the acknowledgement did not make it to the server (due to network conditions), the device will still be erased.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW40" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This command requires a Device Erase access right.</p><p></p></aside></div>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW72" title="RequestMirroring and StopMirroring Control AirPlay Mirroring"></a><h3 class="jump">RequestMirroring and StopMirroring Control AirPlay Mirroring</h3><p>In iOS 7 and later and in macOS 10.10 and later, the MDM server can send the <code>RequestMirroring</code> and <code>StopMirroring</code> commands to start and stop AirPlay mirroring.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW73" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>StopMirroring</code> command is supported in supervised mode only.</p><p></p></aside></div><p>To send a <code>RequestMirroring</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>RequestMirroring</code>.</p></td></tr><tr><td scope="row"><p><code>DestinationName</code></p></td><td><p>String</p></td><td><p>Optional. The name of the AirPlay mirroring destination. For Apple TV, this is the name of the Apple TV.</p></td></tr><tr><td scope="row"><p><code>DestinationDeviceID</code></p></td><td><p>String</p></td><td><p>Optional. The device ID (hardware address) of the AirPlay mirroring destination, in the format "xx:xx:xx:xx:xx:xx". This field is not case sensitive.</p></td></tr><tr><td scope="row"><p><code>ScanTime</code></p></td><td><p>String</p></td><td><p>Optional. Number of seconds to spend searching for the destination. The default is 30 seconds. This value must be in the range 10–300.</p></td></tr><tr><td scope="row"><p><code>Password</code></p></td><td><p>String</p></td><td><p>Optional. The screen sharing password that the device should use when connecting to the destination.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW74" title="Note"></a><p><strong>Note:</strong>&nbsp;Either <code>DestinationName</code> or <code>DestinationDeviceID</code> must be provided. If both are provided, <code>DestinationDeviceID</code> is used.</p><p></p></aside></div><p>In response, the device provides a dictionary with the following key:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>MirroringResult</code></p></td><td><p>String</p></td><td><p>The result of this request. The returned value is one of:</p><ul class="simple"><li><p><code>Prompting</code>: The user is being prompted to share his or her screen.</p></li><li><p><code>DestinationNotFound</code>: The destination cannot be reached by the device.</p></li><li><p><code>Cancelled</code>: The request was cancelled.</p></li><li><p><code>Unknown</code>: An unknown error occurred.</p></li></ul></td></tr></table></div><p>To send a <code>StopMirroring</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>StopMirroring</code>.</p></td></tr></table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW22" title="Restrictions Commands Get a List of Installed Restrictions"></a>
<h3 class="jump">Restrictions Commands Get a List of Installed Restrictions</h3>
<p>This command allows the server to determine what restrictions are being enforced by each profile on the device, and the resulting set of restrictions from the combination of profiles.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td> <p><code>Restrictions</code></p> </td></tr><tr><td scope="row"><p><code>ProfileRestrictions</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, the device reports restrictions enforced by each profile.</p></td></tr></table></div><p>The device responds with:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>GlobalRestrictions</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary containing the global restrictions currently in effect.</p></td></tr><tr><td scope="row"><p><code>ProfileRestrictions</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of dictionaries, containing the restrictions enforced by each profile. Only included if <code>ProfileRestrictions</code> is set to <code>true</code> in the command. The keys are the identifiers of the profiles.</p></td></tr></table></div><p>The <code>GlobalRestrictions</code> dictionary and each entry in the <code>ProfileRestrictionList</code> dictionary contains the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>restrictedBoolean</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of boolean restrictions.</p></td></tr>
<tr><td scope="row"><p><code>restrictedValue</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of numeric restrictions.</p></td></tr>
<tr><td scope="row"><p><code>intersection</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of intersected restrictions.</p></td></tr>
<tr><td scope="row"><p><code>union</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of unioned restrictions.</p></td></tr>
</table></div>
<p>The <code>restrictedBoolean</code> and <code>restrictedValue</code> dictionaries have the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"> <p><em>restriction name</em></p> </td><td><p>Dictionary</p></td><td><p>Restriction parameters.</p></td></tr></table></div><p>The restriction names (keys) in the dictionary correspond to the keys in the Restriction and Passcode Policy payloads. For more information, see <span class="content_text"><a href="https://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206" class="urlLink" rel="external">Configuration Profile Key Reference</a></span>.</p>
<p>Each entry in the dictionary contains the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><em>restriction_name</em></p></td><td><p>Dictionary</p></td><td><p>Restriction parameters.</p></td></tr></table></div>
<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW41" title="Security Note"></a><p><strong>Security Note:</strong>&nbsp;This command requires a Restrictions Query access right.</p><p>Per-profile restrictions queries require an Inspect Configuration Profiles access right.</p><p></p></aside></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW67" title="Note"></a><p><strong>Note:</strong>&nbsp;Restrictions commands are not supported on the macOS MDM client.</p><p></p></aside></div>
<p>The <code>intersection</code> and <code>union</code> dictionaries have the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>value</code></p></td><td><p>Bool or Integer</p></td><td><p>The value of the restriction.</p></td></tr></table></div>
<p>The restriction names (keys) in the dictionary correspond to the keys in the Restriction and Passcode Policy payloads.</p>
<p>Each entry in the dictionary contains the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>values</code></p></td><td><p>Array of strings</p></td><td><p>The values of the restriction.</p></td></tr></table></div>
<p>With intersected restrictions, new restrictions can only reduce the number of strings in the set. With unioned restrictions, new restrictions can add to the set.</p>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW752" title="Clear Restrictions Password"></a><h4 class="jump">Clear Restrictions Password</h4>
<p>The <code>ClearRestrictionsPassword</code> command allows the server to clear the restrictions password and restrictions set by the user on the device. Supervised only. <strong>Availability:</strong> Available in iOS 8 and later.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ClearRestrictionsPassword</code>.</p></td></tr></table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW601" title="Shared iPad User Commands Manage User Access"></a><h3 class="jump">Shared iPad User Commands Manage User Access</h3>
<p>Three MDM Protocol commands—<code>UsersList</code>, <code>LogOutUser</code>, and <code>DeleteUser</code>—let the MDM server exercise control over the access of users to MDM devices in an educational environment. These commands are all available in iOS 9.3 and later and may be used only in Shared iPad mode.</p>

<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_9" title="Note"></a><p><strong>Note:</strong>&nbsp;
Enterprise apps are not supported on Shared iPads; only device-based apps installed under the Volume Purchase Program may be used.</p><p></p></aside></div>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW603" title="UserList"></a><h4 class="jump">UserList</h4>
<p>This command allows the server to query for a list of users that have active accounts on the current device.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>UserList</code>.</p></td></tr></table></div>
<p>The device replies with either an error response of code 12070 if the device cannot return a list of users, or the following response dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Users</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries containing information about active users.</p></td></tr></table></div>
<p>For iOS, each entry in the Users array contains the following dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>UserName</code></p></td><td><p>String</p></td><td><p>The user name of the user.</p></td></tr>
<tr><td scope="row"><p><code>HasDataToSync</code></p></td><td><p>Boolean</p></td><td><p>Whether the user has data that still needs to be synchronized to the cloud.</p></td></tr>
<tr><td scope="row"><p><code>DataQuota</code></p></td><td><p>Integer</p></td><td><p>The data quota set for the user in bytes. This key is optional and may not be present if user quotas have been temporarily turned off by the system or are not enforced for the user. </p></td></tr>
<tr><td scope="row"><p><code>DataUsed</code></p></td><td><p>Integer</p></td><td><p>The amount of data used by the user in bytes. This key is optional and may not be present if an error occurs while the system is trying to determine the information.</p></td></tr>
<tr><td scope="row"><p><code>IsLoggedIn</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the user is currently logged onto the device.</p></td></tr>
</table></div>

<p>For macOS 10.13 or later, each entry in the <code>Users</code> array contains the following dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>UserName</code></p></td><td><p>String</p></td><td><p>The short name of the user.</p></td></tr>
<tr><td scope="row"><p><code>FullName</code></p></td><td><p>String</p></td><td><p>The full name of the user.</p></td></tr>
<tr><td scope="row"><p><code>UID</code></p></td><td><p>Integer</p></td><td><p>The user’s <code>UniqueID</code>.</p></td></tr>
<tr><td scope="row"><p><code>UserGUID</code></p></td><td><p>String</p></td><td><p>The <code>GeneratedUID</code> for the user.</p></td></tr>
<tr><td scope="row"><p><code>MobileAccount</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the account is a mobile account.</p></td></tr>
<tr><td scope="row"><p><code>IsLoggedIn</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the user is currently logged onto the device.</p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW682" title="UnlockUserAccount"></a><h4 class="jump">UnlockUserAccount</h4>
<p>This command lets the server unlock a local user account that has been locked for too many failed password attempts. It requires the Device Lock and Passcode Removal Right and it may be sent only on the device channel.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>UnlockUserAccount</code>.</p></td></tr>
<tr><td scope="row"><p><code>UserName</code></p></td><td><p>String</p></td><td><p>Required. The username of the local account, which may be any local account on the system (not just a user account that is managed by MDM).</p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW602" title="LogOutUser"></a><h4 class="jump">LogOutUser</h4>
<p>This command allows the server to force the current user to log out.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>LogOutUser</code>.</p></td></tr></table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW604" title="DeleteUser"></a><h4 class="jump">DeleteUser</h4>
<p>This command allows the server to delete a user that has an active account on the device. With iOS it is available in Education Mode only; with macOS it requires DEP enrollment.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>DeleteUser</code>.</p></td></tr>
<tr><td scope="row"><p><code>UserName</code></p></td><td><p>String</p></td><td><p>Required. The user name of the user to delete.</p></td></tr>
<tr><td scope="row"><p><code>ForceDeletion</code></p></td><td><p>Boolean</p></td><td><p>Optional. Whether the user should be deleted even if they have data that needs to be synced to the cloud. Defaults to false.</p></td></tr>
</table></div>
<p>With macOS and iOS, the status of the response to <code>DeleteUser</code> is either Acknowledged, or Error with code 12071 if the specified user does not exist, 12072 if the specified user is logged in, 12073 if the specified user has data to sync and <code>ForceDeletion</code> is false or not specified, or 12074 if the specified user could not be deleted. With macOS, 12074 is also returned if an attempt was made to delete the last admin user.</p>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW610" title="MDM Lost Mode Helps Lock and Locate Lost Devices"></a><h3 class="jump">MDM Lost Mode Helps Lock and Locate Lost Devices</h3>
<p>Three MDM Protocol commands—<code>EnableLostMode</code>, <code>DisableLostMode</code>, and <code>DeviceLocation</code>—let the MDM server help locate supervised devices when they are lost or stolen. A fourth command, <code>PlayLostModeSound</code>, plays a loud sound on the lost device. These commands may be used only in supervised mode. The first three commands are available in iOS 9.3 and later and the fourth in iOS 10.3.</p>
<p>When a device is erased, Lost Mode is disabled. To re-enable Lost Mode on the device, the MDM server should store the device’s Lost Mode state before erasing it. If the device is enrolled again, the MDM server can then restore the correct Lost Mode state.</p>
<p>When a device is in MDM Lost mode, invalid commands sent to it may return an Error with code 12078.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW613" title="EnableLostMode"></a><h4 class="jump">EnableLostMode</h4>
<p>This command allows the server to put the device in MDM lost mode, with a message, phone number, and footnote text. A message or phone number must be provided.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>EnableLostMode</code>.</p></td></tr>
<tr><td scope="row"><p><code>Message</code></p></td><td><p>String</p></td><td><p>Required if <code>PhoneNumber</code> is not provided; otherwise optional. If provided, this message is displayed on the lock screen.</p></td></tr>
<tr><td scope="row"><p><code>PhoneNumber</code></p></td><td><p>String</p></td><td><p>Required if <code>Message</code> is not provided; otherwise optional. If provided, this phone number is displayed on the lock screen.</p></td></tr>
<tr><td scope="row"><p><code>Footnote</code></p></td><td><p>String</p></td><td><p>Optional. If provided, this footnote text is displayed in place of “Slide to Unlock.”</p></td></tr>
</table></div>
<p>The response status is either Acknowledged or it is Error with code 12066 if MDM Lost Mode could not be enabled.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW617" title="Play Lost Mode Sound"></a><h4 class="jump">Play Lost Mode Sound</h4>
<p>This command allows the server to tell the device to play a sound if it is in MDM Lost Mode. The sound will play until the device is either removed from Lost Mode or a user disables the sound at the device.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>PlayLostModeSound</code>.</p></td></tr></table></div>
<p>The response status is either Acknowledged, or Error with code 12067 if the device is not in MDM Lost Mode, or Error with code 12080 if the sound could not be played.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW612" title="DisableLostMode"></a><h4 class="jump">DisableLostMode</h4>
<p>This command allows the server to take the device out of MDM lost mode.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>DisableLostMode</code>.</p></td></tr></table></div>
<p>The response status is either Acknowledged or it is Error with code 12069 if MDM Lost Mode could not be disabled.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW614" title="DeviceLocation"></a><h4 class="jump">DeviceLocation</h4>
<p>This command allows the server to ask the device to report its location if it is in MDM lost mode.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>DeviceLocation</code>.</p></td></tr></table></div>
<p>The device replies with either an error response with code 12067 if the device is not in MDM Lost Mode, code 12068 if the location could not be determined, or the following response dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>Latitude</code></p></td><td><p>Double</p></td><td><p>The latitude of the device’s current location.</p></td></tr>
<tr><td scope="row"><p><code>Longitude</code></p></td><td><p>Double</p></td><td><p>The longitude of the device’s current location.</p></td></tr>
<tr><td scope="row"><p><code>HorizontalAccuracy</code></p></td><td><p>Double</p></td><td><p>The radius of uncertainty for the location, measured in meters. If negative, this value could not be determined.</p></td></tr>
<tr><td scope="row"><p><code>VerticalAccuracy</code></p></td><td><p>Double</p></td><td><p>The accuracy of the altitude value in meters. If negative, this value could not be determined.</p></td></tr>
<tr><td scope="row"><p><code>Altitude</code></p></td><td><p>Double</p></td><td><p>The altitude of the device’s current location. If negative, this value could not be determined.</p></td></tr>
<tr><td scope="row"><p><code>Speed</code></p></td><td><p>Double</p></td><td><p>The instantaneous speed of the device in meters per second. If negative, this value could not be determined.</p></td></tr>
<tr><td scope="row"><p><code>Course</code></p></td><td><p>Double</p></td><td><p>The direction in which the device is traveling. If negative, this value could not be determined.</p></td></tr>
<tr><td scope="row"><p><code>Timestamp</code></p></td><td><p>String</p></td><td><p>The <span class="content_text"><a href="https://tools.ietf.org/html/rfc3339" class="urlLink" rel="external">RFC 3339</a></span> timestamp for when this location was determined.</p></td></tr>
</table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW52" title="Managed Applications"></a><h3 class="jump">Managed Applications</h3><p>Running iOS 5 and later, an MDM server can manage third-party applications from the App Store as well as custom in-house enterprise applications. The server can specify whether the app and its data are removed from the device when the MDM profile is removed. Additionally, the server can prevent managed app data from being backed up to iTunes and iCloud.</p><p>In iOS 7 and later, an MDM server can provide a configuration dictionary to third-party apps and can read data from a feedback dictionary provided by third-party apps. See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW68" data-renderer-version="1">Managed App Configuration and Feedback</a></span> for details.</p>
<p>On devices running iOS earlier than iOS 9, apps from the App Store cannot be installed on a user’s device if the App Store has been disabled. With iOS 9 and later, VPP apps can be installed even when the App Store is disabled (see <span class="content_text"><a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/5-Web_Service_Protocol_VPP/webservice.html#//apple_ref/doc/uid/TP40017387-CH8-SW1" data-renderer-version="1">VPP App Assignment</a></span>).</p>
<p>To install a managed app on an iOS device, the MDM server sends an installation command to the user’s device. Unless the device is supervised, the managed apps then require a user’s acceptance before they are installed.</p><p>When a server requests the installation of a managed app from the App Store, if the app was not purchased using App Assignment (that is, if the original <code>InstallApplication</code> request’s <code>Options</code> dictionary contained a <code>PurchaseMethod</code> value of 0), the app “belongs” to the iTunes account that is used at the time the app is installed. Paid apps require the server to send in a Volume Purchasing Program (VPP) redemption code that purchases the app for the end user. For more information on VPP, go to <span class="content_text"><a href="http://www.apple.com/business/vpp/" class="urlLink" rel="external">http://www.apple.com/business/vpp/</a></span>.</p>
<p>The macOS MDM client does not support managed applications. However, it does support the parts of the <code>InstallApplication</code>, <code>InstallMedia</code>, and <code>InviteToProgram</code> MDM commands related to VPP enrollment and installation.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW53" title="InstallApplication Commands Install a Third-Party Application"></a><h4 class="jump">InstallApplication Commands Install a Third-Party Application</h4><p>To send an <code>InstallApplication</code> command, the server sends a request containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>InstallApplication</code>.</p></td></tr><tr><td scope="row"><p><code>iTunesStoreID</code></p></td><td><p>Number</p></td><td><p>The application’s iTunes Store ID.</p><p></p><p>For example, the numeric ID for Keynote is <code>361285480</code> as found in the App Store link <span class="content_text"><a href="http://itunes.apple.com/us/app/keynote/id361285480?mt=8" class="urlLink" rel="external">http://itunes.apple.com/us/app/keynote/id361285480?mt=8</a></span>.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>Optional. The application’s bundle identifier. Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>Options</code></p></td><td><p>Dictionary</p></td><td><p>Optional. App installation options. The available options are listed below. Available in iOS 7 and later.</p></td></tr><tr><td scope="row"><p><code>ManifestURL</code></p></td><td><p>String</p></td><td><p>The <code>https</code> URL where the manifest of an enterprise application can be found.</p><p>Note: In iOS 7 and later, this URL and the URLs of any assets specified in the manifest must begin with <code>https</code>.</p></td></tr>

<tr><td scope="row"><p><code>ManagementFlags</code></p></td><td><p>Integer</p></td><td><p>The bitwise OR of the following flags:</p><p>1: Remove app when MDM profile is removed.</p><p>4: Prevent backup of the app data.</p></td></tr>

<tr><td scope="row"><p>Configuration</p></td><td><p>Dictionary</p></td><td><p>Optional. If provided, this contains the initial configuration dictionary for the managed app. For more information, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW68" data-renderer-version="1">Managed App Configuration and Feedback</a></span>.</p></td></tr>
<tr><td scope="row"><p>Attributes</p></td><td><p>Dictionary</p></td><td><p>Optional. If provided, this dictionary contains the initial attributes for the app. For a list of allowed keys, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW69" data-renderer-version="1">ManagedApplicationAttributes Queries App Attributes</a></span>.</p></td></tr>

<tr><td scope="row"><p><code>ChangeManagementState</code></p></td><td><p>String</p></td><td><p>Optional. Currently the only supported value is the following:</p><p><code>Managed</code>: Take management of this app if the user has installed it already. Available in iOS 9 and later.</p></td></tr>

</table></div>

<p>If the application is not already installed and the <code>ChangeManagementState</code> is set to <code>Managed</code>, the app will be installed and managed.  If the application is installed unmanaged, the user will be prompted to allow management of the app on unsupervised devices and, if accepted, the application becomes managed.</p>

<p>The request must contain exactly one of the following fields: <code>Identifier</code>, <code>iTunesStoreID</code>, or <code>ManifestURL</code> value.</p><p>The options dictionary can contain the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>PurchaseMethod</code></p></td><td><p>Integer</p></td><td>
<p>One of the following:</p>
<p>0: Legacy Volume Purchase Program (iOS only)</p>
<p>1: Volume Purchase Program App Assignment</p>
</td></tr>
</table></div>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW754" title="iOS App Installation"></a><h5 class="jump">iOS App Installation</h5>
<p>Here is an example of an iOS <code>InstallApplication</code> command for a per-device VPP app that uses the <code>ChangeManagementState</code> option:</p>
<div class="codesample clear"><table><tr><td scope="row"><pre>&#60;?xml version="1.0" encoding="UTF-8"?&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;plist version="1.0"&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;ChangeManagementState&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;string&#62;Managed&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;ManagementFlags&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;integer&#62;1&#60;/integer&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;Options&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   	&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;key&#62;PurchaseMethod&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;integer&#62;1&#60;/integer&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   	&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;RequestType&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;string&#62;InstallApplication&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;iTunesStoreID&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;integer&#62;361309726&#60;/integer&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/plist&#62;<span></span></pre></td></tr></table></div>
<p>If the request is accepted by the user, the device responds with an Acknowledged response and the following fields:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The app’s identifier (Bundle ID)</p></td></tr><tr><td scope="row"><p><code>State</code></p></td><td><p>String</p></td><td><p>The app’s installation state. If the state is NeedsRedemption, the server needs to send a redemption code to complete the app installation. If it is PromptingForUpdate, the process is waiting for the user to approve an app update.</p></td></tr></table></div><p>If the app cannot be installed, the device responds with an Error status, with the following fields:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RejectionReason</code></p></td><td><p>String</p></td><td><p>One of the following:</p><ul class="threeHead"><li class="li"><p><code>AppAlreadyInstalled</code></p></li><li class="li"><p><code>AppAlreadyQueued</code></p></li><li class="li"><p><code>NotSupported</code></p></li><li class="li"><p><code>CouldNotVerifyAppID</code></p></li><li class="li"><p><code>AppStoreDisabled</code></p></li><li class="li"><p><code>NotAnApp</code></p></li><li class="li"><p><code>PurchaseMethodNotSupported</code> (iOS 7 and later)</p></li></ul></td></tr></table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW755" title="macOS App Installation"></a><h5 class="jump">macOS App Installation</h5>


<p>macOS apps are installed through MDM as packages. Using <code>productbuild</code>, each package must be signed with an appropriate certificate (such as a TLS/SSL certificate with signing usage) and must be md5 hashed into 10 MB chunks. Only the package needs to be signed, not the app; Apple’s Gatekeeper doesn’t check apps installed through MDM.</p>
<p>The command lines to install a macOS app package should look like this:</p>
<div class="codesample clear"><table><tr><td scope="row"><pre>$ sudo pkgbuild —component ~/Desktop/MyApp.app —install-location /Applications<span></span></pre></td></tr><tr><td scope="row"><pre> —sign myserver.myenterprise.com /tmp/myPackage.pkg<span></span></pre></td></tr><tr><td scope="row"><pre>$ split -b 10485760 myPackage.pkg myPackage.pkg.<span></span></pre></td></tr><tr><td scope="row"><pre>$ md5 -r myPackage.pkg.*<span></span></pre></td></tr></table></div>
<p>The manifest file included in the foregoing installation should contain:</p>
<ul class="simple">
<li><p>the (HTTP) path to the package</p></li>
<li><p>the (HTTP) path to the display icons</p></li>
<li><p>the md5 hash size (10 MB as defined by CommerceKit)</p></li>
<li><p>the md5 hash information</p></li>
<li><p>the size of the download (package) in bytes</p></li>
<li><p>a unique bundle identifier to identify the package</p></li>
<li><p>bundle identifiers describing the items inside the package</p></li>
<li><p>descriptive titles for display purposes</p></li>
</ul>
<p>The following lists a typical <code>Manifest.plist</code> file:</p>
<div class="codesample clear"><table><tr><td scope="row"><pre>&#60;?xml version="1.0" encoding="UTF-8"?&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;plist version="1.0"&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;key&#62;items&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   	&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;key&#62;assets&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;kind&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;software-package&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;md5-size&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;integer&#62;10485760&#60;/integer&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;md5s&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;string&#62;d519a84e907a088f7e77381e8ce265e5&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;string&#62;0c4ea856a1b18ea7e24124d41fad3cc1&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;string&#62;5a6b17332bf258e77956ac0d7a69ff8a&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;/array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;url&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;http://myserver.myenterprise.com/MDM_Test/MyApp.pkg&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;kind&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;full-size-image&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;needs-shine&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;false/&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;url&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;http://myserver.myenterprise.com/MDM_Test/Server.png&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;kind&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;display-image&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;needs-shine&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;false/&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;key&#62;url&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;string&#62;http://myserver.myenterprise.com/MDM_Test/Server.png&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;/array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;key&#62;metadata&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;bundle-identifier&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;com.myenterprise.MyAppPackage&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;bundle-version&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;1.0&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;items&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;key&#62;bundle-identifier&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;string&#62;com.myenterprise.MyAppNotMAS&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;key&#62;bundle-version&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   					&#60;string&#62;1.7.4&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   				&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;/array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;kind&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;software&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;sizeInBytes&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;26613453&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;subtitle&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;My Enterprise&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;key&#62;title&#60;/key&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   			&#60;string&#62;Example Enterprise Install&#60;/string&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   		&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   	&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>   &#60;/array&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/dict&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>&#60;/plist&#62;<span></span></pre></td></tr></table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW54" title="ApplyRedemptionCode Commands Install Paid Applications via Redemption Code"></a><h4 class="jump">ApplyRedemptionCode Commands Install Paid Applications via Redemption Code</h4><p>If a redemption code is needed during app installation, the server can use the <code>ApplyRedemptionCode</code> command to complete the app installation:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ApplyRedemptionCode</code>.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The App ID returned by the InstallApplication command.</p></td></tr><tr><td scope="row"><p><code>RedemptionCode</code></p></td><td><p>String</p></td><td><p>The redemption code that applies to the app being installed.</p></td></tr></table></div><p>If the user accepts the request, an acknowledgement response is sent.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW55" title="Note"></a><p><strong>Note:</strong>&nbsp;It is an error to send a redemption for an app that doesn’t require a redemption code.</p><p></p></aside></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW56" title="ManagedApplicationList Commands Provide the Status of Managed Applications"></a><h4 class="jump">ManagedApplicationList Commands Provide the Status of Managed Applications</h4><p>The <code>ManageApplicationList</code> command allows the server to query the status of managed apps.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW57" title="Note"></a><p><strong>Note:</strong>&nbsp;Certain statuses are transient. Once they are reported to the server, the entries for the apps are removed from the next query.</p><p></p></aside></div><p>To send a <code>ManagedApplicationList</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ManagedApplicationList</code>.</p></td></tr><tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array</p></td><td><p>Optional. An array of app identifiers as strings. If provided, the response contains only the status of apps whose identifiers appear in this array. </p><p><strong>Availability: </strong>Available in iOS 7 and later.</p></td></tr></table></div><p>In response, the device sends a dictionary with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ManagedApplicationList</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary of managed apps.</p></td></tr></table></div><p>The keys of the <code>ManagedApplicationList</code> dictionary are the app identifiers for the managed apps. The corresponding values are dictionaries that contain the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>



<tr><td scope="row"><p><code>Status</code></p></td><td><p>String</p></td><td><p>The status of the managed app; see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW333" data-renderer-version="1">Table 12</a></span> for possible values.</p></td></tr>
<tr><td scope="row"><p><code>ManagementFlags</code></p></td><td><p>Integer</p></td><td><p>Management flags. (See InstallApplication command above for a list of flags.)</p></td></tr><tr><td scope="row"><p><code>UnusedRedemptionCode</code></p></td><td><p>String</p></td><td><p>If the user has already purchased a paid app, the unused redemption code is reported here. This code can be used again to purchase the app for someone else. This code is reported only once.</p></td></tr><tr><td scope="row"><p>HasConfiguration</p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the app has a server-provided configuration. For details, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW68" data-renderer-version="1">Managed App Configuration and Feedback</a></span>. </p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr>
<tr><td scope="row"><p>HasFeedback</p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the app has feedback for the server. For details, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW68" data-renderer-version="1">Managed App Configuration and Feedback</a></span>. </p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr>
<tr><td scope="row"><p>IsValidated</p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, the app has validated as allowed to run and is able to run on the device. If an app is enterprise-distributed and is not validated, it will not run on the device until validated. </p><p><strong>Availability:</strong> Available in iOS 9.2 and later.</p></td></tr><tr><td scope="row"><p>ExternalVersionIdentifier</p></td><td><p>String</p></td><td><p>The application’s external version ID. It can be used for comparison in the iTunes Search API to decide if the application needs to be updated. </p><p><strong>Availability:</strong> Available in iOS 11 and later.</p></td></tr>
</table></div>

<a name="//apple_ref/doc/uid/TP40017387-CH3-SW333" title="Table 12Managed app statuses"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 12</strong>&nbsp;&nbsp;Managed app statuses</caption>
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Value</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Description</p></th></tr>
<tr><td scope="row"><p><code>NeedsRedemption</code></p></td><td><p>The app is scheduled for installation but needs a redemption code to complete the transaction.</p></td></tr>
<tr><td scope="row"><p><code>Redeeming</code></p></td><td><p>The device is redeeming the redemption code.</p></td></tr>
<tr><td scope="row"><p><code>Prompting</code></p></td><td><p>The user is being prompted for app installation.</p></td></tr>
<tr><td scope="row"><p><code>PromptingForLogin</code></p></td><td><p>The user is being prompted for App Store credentials.</p></td></tr>
<tr><td scope="row"><p><code>Installing</code></p></td><td><p>The app is being installed.</p></td></tr>
<tr><td scope="row"><p><code>ValidatingPurchase</code></p></td><td><p>An app purchase is being validated.</p></td></tr>
<tr><td scope="row"><p><code>Managed</code></p></td><td><p>The app is installed and managed.</p></td></tr>
<tr><td scope="row"><p><code>ManagedButUninstalled</code></p></td><td><p>The app is managed but has been removed by the user. When the app is installed again (even by the user), it will be managed once again.</p></td></tr>
<tr><td scope="row"><p><code>PromptingForUpdate</code></p></td><td><p>The user is being prompted for an update.</p></td></tr>
<tr><td scope="row"><p><code>PromptingForUpdateLogin</code></p></td><td><p>The user is being prompted for App Store credentials for an update.</p></td></tr>
<tr><td scope="row"><p><code>PromptingForManagement</code></p></td><td><p>The user is being prompted to change an installed app to be managed.</p></td></tr>
<tr><td scope="row"><p><code>Updating</code></p></td><td><p>The app is being updated.</p></td></tr>
<tr><td scope="row"><p><code>ValidatingUpdate</code></p></td><td><p>An app update is being validated.</p></td></tr>
<tr><td scope="row"><p><code>Unknown</code></p></td><td><p>The app state is unknown.</p></td></tr>
<tr><td colspan="2" scope="row"><p>The following statuses are transient and are reported only once:</p></td></tr>
<tr><td scope="row"><p><code>UserInstalledApp</code></p></td><td><p>The user has installed the app before managed app installation could take place.</p></td></tr>
<tr><td scope="row"><p><code>UserRejected</code></p></td><td><p>The user rejected the offer to install the app.</p></td></tr>
<tr><td scope="row"><p><code>UpdateRejected</code></p></td><td><p>The user rejected the offer to update the app.</p></td></tr>
<tr><td scope="row"><p><code>ManagementRejected</code></p></td><td><p>The user rejected management of an already installed app.</p></td></tr>
<tr><td scope="row"><p><code>Failed</code></p></td><td><p>The app installation has failed.</p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW58" title="RemoveApplication Commands Remove Installed Managed Applications"></a><h4 class="jump">RemoveApplication Commands Remove Installed Managed Applications</h4><p>The RemoveApplication command is used to remove managed apps and their data from a device. Applications not installed by the server cannot be removed with this command. To send a <code>RemoveApplication</code> command, the server sends a dictionary containing the following commands:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>RemoveApplication</code>.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s identifier.</p></td></tr></table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW75" title="InviteToProgram Lets the Server Invite a User to Join a Volume Purchasing Program"></a><h4 class="jump">InviteToProgram Lets the Server Invite a User to Join a Volume Purchasing Program</h4>
<p>In iOS 7 and later, this command allows a server to invite a user to join the Volume Purchase Program for per-user VPP app assignment. After this command issues an invitation, you can use the <code>iTunesStoreAccountIsActive</code> query to get the hash of the iTunes Store account currently logged in.</p><p>To send an <code>InviteToProgram</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>InviteToProgram</code>.</p></td></tr><tr><td scope="row"><p><code>ProgramID</code></p></td><td><p>String</p></td><td><p>The program’s identifier. One of the following:</p><ul class="simple"><li><p><code>com.apple.cloudvpp</code>: Volume Purchase Program App Assignment</p></li></ul></td></tr><tr><td scope="row"><p><code>InvitationURL</code></p></td><td><p>String</p></td><td><p>An invitation URL provided by the program.</p></td></tr></table></div><p>In response, the device sends a dictionary with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>InvitationResult</code></p></td><td><p>String</p></td><td><p>One of the following:</p><ul class="simple"><li><p><code>Acknowledged</code></p></li><li><p><code>InvalidProgramID</code></p></li><li><p><code>InvalidInvitationURL</code></p></li></ul></td></tr></table></div><p>This command yields a <code>NotNow</code> status until the user exits Setup Assistant.</p>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW776" title="ValidateApplications Verifies Application Provisioning Profiles"></a><h4 class="jump">ValidateApplications Verifies Application Provisioning Profiles</h4>
<p>This command allows the server to force validation of the free developer and universal provisioning profiles associated with an enterprise app. <strong>Availability:</strong> Available in iOS 9.2 and later.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ValidateApplications</code>.</p></td></tr>
<tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array of Strings</p></td><td><p>Optional. An array of app identifiers. If provided, the enterprise apps whose identifiers appear in this array have their provisioning profiles validated. If not, only installed managed apps have their provisioning profiles validated.</p></td></tr>
</table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW76" title="Installed Books"></a><h3 class="jump">Installed Books</h3>
<p>Books obtained from the iBooks Store can be installed on a device. These books will be backed up, will sync to iTunes, and will remain after the MDM profile is removed. Books not obtained from the iBooks Store will not sync to iTunes and will be removed when the MDM profile is removed.</p>
<p>Books obtained from the iBooks Store must be purchased using VPP Licensing. Installing a book from the iBooks Store on a device that already has that book installed causes the book to be visible to the MDM server.</p>
<p>Installation of books requires the App Installation right. The App Store must be enabled for iBooks Store media installation to work. The App Store need not be enabled to install books retrieved using a URL.</p>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW577" title="InstallMedia Installs a Book onto a Device"></a><h4 class="jump">InstallMedia Installs a Book onto a Device</h4><p>To send an <code>InstallMedia</code> command (in iOS 8 or later), the server sends a dictionary containing the following keys:</p>

<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>InstallMedia</code>.</p></td></tr>
<tr><td scope="row"><p><code>iTunesStoreID</code></p></td><td><p>Integer</p></td><td><p>Optional. The media’s iTunes Store ID.</p></td></tr>
<tr><td scope="row"><p><code>MediaURL</code></p></td><td><p>String</p></td><td><p>Optional; not supported in macOS. The URL from which the media will be retrieved.</p></td></tr>
<tr><td scope="row"><p><code>MediaType</code></p></td><td><p>String</p></td><td><p><code>Book</code>.</p></td></tr></table></div>
<p>The request must contain either an <code>iTunesStoreID</code> or a <code>MediaURL</code>.</p>
<p>If a <code>MediaURL</code> is provided, the URL must lead to a PDF, gzipped epub, or gzipped iBooks document. The following fields are provided to define this document:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr>
<td scope="row"><p><code>PersistentID</code></p></td>
<td><p>String</p></td>
<td><p>Persistent ID in reverse-DNS form, e.g., <code>com.acme.manuals.training</code>.</p></td></tr>
<tr>
<td scope="row"><p><code>Kind</code></p></td>
<td><p>String</p></td>
<td><p>Optional. The media kind. Must be one of the following:</p>
<ul class="threeHead">
<li class="li"><p><code>pdf</code>: PDF file</p></li>
<li class="li"><p><code>epub</code>: A gzipped epub</p></li>
<li class="li"><p><code>ibooks</code>: A gzipped iBooks Author-exported book</p></li>
</ul>
<p>If this field is not provided, the file extension in the URL is used.</p></td></tr>
<tr>
<td scope="row"><p><code>Version</code></p></td>
<td><p>String</p></td>
<td><p>Optional. A version string that is meaningful to the MDM server.</p></td></tr>
<tr>
<td scope="row"><p><code>Author</code></p></td>
<td><p>String</p></td>
<td><p>Optional.</p></td></tr>
<tr>
<td scope="row"><p><code>Title</code></p></td>
<td><p>String</p></td>
<td><p>Optional.</p></td></tr>
</table></div>
<p>Installing a book not from the iBooks Store with the same <code>PersistentID</code> as an existing book not from the iBooks Store replaces the old book with the new. Installing an iBooks Store book with the same <code>iTunesStoreID</code> as an existing installed book updates the book from the iBooks Store.</p>
<p>The user is not prompted for book installation or update unless user interaction is needed to complete an iBooks Store transaction.</p>
<p>If the request is accepted, the device responds with an Acknowledged response and the following fields:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>iTunesStoreID</code></p></td><td><p>Integer</p></td><td><p>The book’s iTunes Store ID, if it was provided in the command.</p></td></tr>
<tr><td scope="row"><p><code>MediaURL</code></p></td><td><p>String</p></td><td><p>The book’s URL, if it was provided in the command.</p></td></tr>
<tr><td scope="row"><p><code>PersistentID</code></p></td><td><p>String</p></td><td><p>Persistent ID, if it was provided in the command.</p></td></tr>
<tr><td scope="row"><p><code>MediaType</code></p></td><td><p>String</p></td><td><p>The media type.</p></td></tr>
<tr><td scope="row"><p><code>State</code></p></td><td><p>String</p></td><td><p>The installation state of this media. This value can be one of the following:</p><ul class="simple">
<li><p><code>Queued</code></p></li>
<li><p><code>PromptingForLogin</code></p></li>
<li><p><code>Updating</code></p></li>
<li><p><code>Installing</code></p></li>
<li><p><code>Installed</code></p></li>
<li><p><code>Uninstalled</code></p></li>
<li><p><code>UserInstalled</code></p></li>
<li><p><code>Rejected</code></p></li>
</ul>
<p>The following states are transient and are reported only once:</p>
<ul class="simple">
<li><p><code>Failed</code></p></li>
<li><p><code>Unknown</code></p></li>
</ul></td></tr>
</table></div>
<p>If the book cannot be installed, an <code>Error</code> status is returned, which may contain an error chain. In addition, a <code>RejectionReason</code> field of type <code>String</code> is returned, containing one of these values:</p>
<ul class="ul">
<li class="li"><p><code>CouldNotVerifyITunesStoreID</code></p></li>
<li class="li"><p><code>PurchaseNotFound</code>: No VPP license found in the user’s history</p></li>
<li class="li"><p><code>AppStoreDisabled</code></p></li>
<li class="li"><p><code>WrongMediaType</code></p></li>
<li class="li"><p><code>DownloadInvalid</code>: URL doesn’t lead to valid book</p></li>
</ul>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW578" title="ManagedMediaList Returns a List of Installed Media on a Device"></a><h4 class="jump">ManagedMediaList Returns a List of Installed Media on a Device</h4>
<p>To send a <code>ManagedMediaList</code> command, the server sends a dictionary containing the following key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ManagedMediaList</code>.</p></td></tr></table></div>
<p>If the request is accepted, the device responds with an <code>Acknowledged</code> response and the following field:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Books</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries.</p></td></tr></table></div>
<p>Each entry in the <code>ManagedMedia</code> array is a dictionary with the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>iTunesStoreID</code></p></td><td><p>Integer</p></td><td><p>The item’s iTunes Store ID, if the item was retrieved from the iTunes Store.</p></td></tr>
<tr><td scope="row"><p><code>State</code></p></td><td><p>String</p></td><td><p>The installation state of this media. This value can be one of the following:</p><ul class="simple">
<li><p><code>Queued</code></p></li>
<li><p><code>PromptingForLogin</code></p></li>
<li><p><code>Updating</code></p></li>
<li><p><code>Installing</code></p></li>
<li><p><code>Installed</code></p></li>
<li><p><code>Uninstalled</code></p></li>
<li><p><code>UserInstalled</code></p></li>
<li><p><code>Rejected</code></p></li>
</ul></td></tr>
<tr><td scope="row"><p><code>PersistentID</code></p></td><td><p>String</p></td><td><p>Provided if available.</p></td></tr>
<tr><td scope="row"><p><code>Kind</code></p></td><td><p>String</p></td><td><p>Provided if available.</p></td></tr>
<tr><td scope="row"><p><code>Version</code></p></td><td><p>String</p></td><td><p>Provided if available.</p></td></tr>
<tr><td scope="row"><p><code>Author</code></p></td><td><p>String</p></td><td><p>Provided if available.</p></td></tr>
<tr><td scope="row"><p><code>Title</code></p></td><td><p>String</p></td><td><p>Provided if available.</p></td></tr>
</table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW79" title="RemoveMedia Removes a Piece of Installed Media"></a><h4 class="jump">RemoveMedia Removes a Piece of Installed Media</h4><p>This command allows an MDM server to remove installed media. This command returns <code>Acknowledged</code> if the item is not found.</p><p>To send a <code>RemoveMedia</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>RemoveMedia</code>.</p></td></tr>
<tr><td scope="row"><p><code>MediaType</code></p></td><td><p>String</p></td><td><p><code>Book</code>.</p></td></tr>
<tr><td scope="row"><p><code>iTunesStoreID</code></p></td><td><p>Integer</p></td><td><p>Optional. iTunes Store ID.</p></td></tr>
<tr><td scope="row"><p><code>PersistentID</code></p></td><td><p>String</p></td><td><p>
Optional. Persistent ID of the item to remove.</p></td></tr></table></div>
<p>Upon success, an <code>Acknowledged</code> status is returned. Otherwise, an error status is returned.</p>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW59" title="Managed Settings"></a><h3 class="jump">Managed Settings</h3><p>In iOS 5 or later, this command allows the server to set settings on the device. These settings take effect on a one-time basis. The user may still be able to change the settings at a later time. This command requires the Apply Settings right.</p><p>The macOS MDM client does not support managing settings.</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>Settings</code>.</p></td></tr><tr><td scope="row"><p><code>Settings</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries. See below.</p></td></tr></table></div><p>Each entry in the <code>Settings</code> array must be a dictionary. The specific values in that dictionary are described in the documentation for the specific setting.</p><p>Unless the command is invalid, the <code>Settings</code> command always returns an <code>Acknowledged</code> status. However, the response dictionary contains an additional key-value pair:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Settings</code></p></td><td><p>Array</p></td><td><p>Array of results. See below.</p></td></tr></table></div><p>In the response, the <code>Settings</code> array contains a result dictionary that corresponds with each command that appeared in the original <code>Settings</code> array (in the request). These dictionaries contain the following keys and values:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Status</code></p></td><td><p>String</p></td><td><p>Status of the command.</p><p>Only <code>Acknowledged</code> and <code>Error</code> are reported.</p></td></tr><tr><td scope="row"><p><code>ErrorChain</code></p></td><td><p>Array</p></td><td><p>Optional. An array representing the chain of errors that occurred.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>Optional. The app identifier to which this error applies.</p><p><strong>Availability:</strong> Available in iOS 7 and later.</p></td></tr></table></div><p>Each entry in the <code>ErrorChain</code> array is a dictionary containing the same keys found in the top level <code>ErrorChain</code> dictionary of the protocol.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW60" title="VoiceRoaming Modifies the Voice Roaming Setting"></a><h4 class="jump">VoiceRoaming Modifies the Voice Roaming Setting</h4><p>To send a <code>VoiceRoaming</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>VoiceRoaming</code>.</p></td></tr><tr><td scope="row"><p>Enabled</p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, enables voice roaming.</p><p>If <code>false</code>, disables voice roaming.</p><p>The voice roaming setting is only available on certain carriers.</p><p>Disabling voice roaming also disables data roaming.</p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW80" title="PersonalHotspot Modifies the Personal Hotspot Setting"></a><h4 class="jump">PersonalHotspot Modifies the Personal Hotspot Setting</h4><p>To send a <code>PersonalHotspot</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>PersonalHotspot</code>.</p></td></tr><tr><td scope="row"><p>Enabled</p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, enables Personal Hotspot.</p><p>If <code>false</code>, disables Personal Hotspot.</p><p>The Personal Hotspot setting is only available on certain carriers.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW81" title="Note"></a><p><strong>Note:</strong>&nbsp;This query requires the Network Information right.</p><p></p></aside></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW78" title="Wallpaper Sets the Wallpaper"></a><h4 class="jump">Wallpaper Sets the Wallpaper</h4><p>A wallpaper change (in iOS 8 or later) is a one-time setting that can be changed by the user at will. This command is supported in supervised mode only.</p><p>To send a <code>Wallpaper</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>Wallpaper</code>.</p></td></tr><tr><td scope="row"><p><code>Image</code></p></td><td><p>Data</p></td><td><p>A Base64-encoded image to be used for the wallpaper. Images must be in either PNG or JPEG format.</p></td></tr><tr><td scope="row"><p><code>Where</code></p></td><td><p>Number</p></td><td><p>Where the wallpaper should be applied.</p><p>1: Lock screen</p><p>2: Home (icon list) screen</p><p>3: Lock and Home screens</p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW61" title="DataRoaming Modifies the Data Roaming Setting"></a><h4 class="jump">DataRoaming Modifies the Data Roaming Setting</h4><p>To send a <code>DataRoaming</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>DataRoaming</code>.</p></td></tr><tr><td scope="row"><p><code>Enabled</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, enables data roaming.</p><p>If <code>false</code>, disables data roaming.</p><p>Enabling data roaming also enables voice roaming.</p></td></tr></table></div></section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW92" title="ApplicationAttributes Sets or Updates the App Attributes for a Managed Application"></a><h4 class="jump">ApplicationAttributes Sets or Updates the App Attributes for a Managed Application</h4><p>To set or update the attributes for a managed application, send a <code>Settings</code> command with the following dictionary as an entry:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>ApplicationAttributes</code>.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The app identifier.</p></td></tr><tr><td scope="row"><p><code>Attributes</code></p></td><td><p>Dictionary</p></td><td><p>Optional. Attributes to be applied to the app. If this member is missing, any existing attributes for the app are removed.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW93" title="Note"></a><p><strong>Note:</strong>&nbsp;This setting requires the App Management right.</p><p></p></aside></div><p>The keys that can appear in the <code>Attributes</code> dictionary are listed below:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>VPNUUID</code></p></td><td><p>String</p></td><td><p>Per-App VPN UUID assigned to this app.</p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW187" title="DeviceName and HostName Set the Names of the Device"></a><h4 class="jump">DeviceName and HostName Set the Names of the Device</h4>
<p>To send a <code>DeviceName</code> command (available only on supervised devices or devices running macOS v10.10 or later), the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>DeviceName</code>.</p></td></tr>
<tr><td scope="row"><p><code>DeviceName</code></p></td><td><p>String</p></td><td><p>The requested computer name and local host name for the device.</p></td></tr>
</table></div>
<p>On macOS, the <code>DeviceName</code> command sets only the computer name and local host name of the device. To set the <code>HostName</code> of the device (available only on macOS 10.11 or later), the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>HostName</code>.</p></td></tr>
<tr><td scope="row"><p><code>HostName</code></p></td><td><p>String</p></td><td><p>The requested <code>HostName</code> for the device.</p></td></tr>
</table></div>
</section>



<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW87" title="MDMOptions Sets Options Related to the MDM Protocol"></a><h4 class="jump">MDMOptions Sets Options Related to the MDM Protocol</h4><p>To send an <code>MDMOptions</code> command (available only in iOS 7 and later), the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>MDMOptions</code>.</p></td></tr><tr><td scope="row"><p><code>MDMOptions</code></p></td><td><p>Dictionary</p></td><td><p>A dictionary, as described below.</p></td></tr></table></div><p>The <code>MDMOptions</code> dictionary can contain the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ActivationLockAllowedWhileSupervised</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, a supervised device registers itself with Activation Lock when the user enables Find My iPhone. Defaults to <code>false</code>. This setting is ignored on unsupervised devices.</p></td></tr></table></div>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW287" title="PasscodeLockGracePeriod Customizes the Passcode Lock on Shared iPads"></a><h4 class="jump">PasscodeLockGracePeriod Customizes the Passcode Lock on Shared iPads</h4><p>Shared iPad Mode only. The <code>PasscodeLockGracePeriod</code> command sets the time the screen must be locked before needing a passcode to unlock it. Changing to a less restrictive value will not take effect until the user logs out.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>PasscodeLockGracePeriod</code>.</p></td></tr><tr><td scope="row"><p><code>PasscodeLockGracePeriod</code></p></td><td><p>Integer</p></td><td><p>The number of seconds the screen must be locked before unlock attempts will require the device passcode.</p></td></tr>
</table></div>
<p><strong>Availability:</strong> Available in iOS 9.3.2 and later.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW288" title="MaximumResidentUsers Sets Maximum Number of Users for a Shared iPad"></a><h4 class="jump">MaximumResidentUsers Sets Maximum Number of Users for a Shared iPad</h4>
<p>Shared iPad Mode only. Sets the maximum number of users that can use a Shared iPad. This can be set only when the iPad is in the <code>AwaitingConfiguration</code> phase, before the <code>DeviceConfigured</code> message has been sent to the device. If <code>MaximumResidentUsers</code> is greater than the maximum possible number of users supported on the device, the device is configured with the maximum possible number of users instead.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>MaximumResidentUsers</code>.</p></td></tr>
<tr><td scope="row"><p><code>MaximumResidentUsers</code></p></td><td><p>Integer</p></td><td><p>The maximum number of users that can use a Shared iPad.</p></td></tr>
</table></div>
<p><strong>Availability: </strong>Available in iOS 9.3 and later.</p>
</section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_4" title="DiagnosticSubmission Enables Submission of Diagnostics"></a><h4 class="jump">DiagnosticSubmission Enables Submission of Diagnostics</h4><p>Shared iPad Mode only. Sets the user preference of diagnostic submission.</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>DiagnosticSubmission</code>.</p></td></tr><tr><td scope="row"><p><code>Enabled</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, enables diagnostic submission. </p><p>If <code>false</code>, disables diagnostic submission.</p></td></tr></table></div><p><strong>Availability: </strong>Available in iOS 9.3 and later.</p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_5" title="AppAnalytics Enables Sharing Analytics with App Developers"></a><h4 class="jump">AppAnalytics Enables Sharing Analytics with App Developers</h4><p>Shared iPad Mode only. Sets the user preference of sharing analytics with app developers.</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>AppAnalytics</code>.</p></td></tr><tr><td scope="row"><p><code>Enabled</code></p></td><td><p>Boolean</p></td><td><p>If <code>true</code>, enables app analytics. </p><p>If <code>false</code>, disables app analytics.</p></td></tr></table></div><p><strong>Availability: </strong>Available in iOS 9.3.2 and later.</p></section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW68" title="Managed App Configuration and Feedback"></a><h3 class="jump">Managed App Configuration and Feedback</h3><p>In iOS 7 and later, an MDM server can use configuration and feedback dictionaries to communicate with and configure third-party managed apps.</p><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_10" title="Important"></a><p><strong>Important:</strong>&nbsp;The managed app configuration and feedback dictionaries are stored as unencrypted files. Do not store passwords or private keys in these dictionaries.</p><p></p></aside></div><p>The configuration dictionary provides one-way communication from the MDM server to an app. An app can access its (read-only) configuration dictionary by reading the key <code>com.apple.configuration.managed</code> using the <code>NSUserDefaults</code> class. A managed app can respond to new configurations that arrive while the app is running by observing the <code>NSUserDefaultsDidChangeNotification</code> notification.</p><p>A managed app can also store feedback information that can be queried over MDM. An app can store new values for this feedback dictionary by setting the <code>com.apple.feedback.managed</code> key using the <code>NSUserDefaults</code> class. This dictionary can be read or deleted over MDM. An app can respond to the deletion of the feedback dictionary by observing the <code>NSUserDefaultsDidChangeNotification</code> notification.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW88" title="ManagedApplicationConfiguration Retrieves Managed App Configurations"></a><h4 class="jump">ManagedApplicationConfiguration Retrieves Managed App Configurations</h4><p>To send a <code>ManagedApplicationConfiguration</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ManagedApplicationConfiguration</code>.</p></td></tr><tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array</p></td><td><p>Array of managed bundle identifiers, as strings.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW89" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>ManagedApplicationConfiguration</code> command requires that the server have the App Management right.</p><p>Queries about apps that are not managed are ignored.</p><p></p></aside></div><p>In response, the device sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ApplicationConfigurations</code></p></td><td><p>Array</p></td><td><p>An array of dictionaries, one per app.</p></td></tr></table></div><p>Each member of the <code>ApplicationConfigurations</code> array is a dictionary with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s bundle identifier.</p></td></tr><tr><td scope="row"><p><code>Configuration</code></p></td><td><p>Dictionary</p></td><td><p>Optional. The current configuration. If the app has no managed configuration, this key is absent.</p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW90" title="ApplicationConfiguration Sets or Updates the App Configuration for a Managed Application"></a><h4 class="jump">ApplicationConfiguration Sets or Updates the App Configuration for a Managed Application</h4><p>In iOS 7 and later, to set or update the app configuration for a managed application, send a <code>Settings</code> command with the following dictionary as an entry:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Item</code></p></td><td><p>String</p></td><td><p><code>ApplicationConfiguration</code>.</p></td></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s bundle identifier.</p></td></tr><tr><td scope="row"><p><code>Configuration</code></p></td><td><p>Dictionary</p></td><td><p>Optional. Configuration dictionary to be applied to the app. If this member is missing, any existing managed configuration for the app is removed.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW91" title="Note"></a><p><strong>Note:</strong>&nbsp;This setting requires the App Management right.</p><p></p></aside></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW69" title="ManagedApplicationAttributes Queries App Attributes"></a><h4 class="jump">ManagedApplicationAttributes Queries App Attributes</h4><p>In iOS 7 and later, attributes can be set on managed apps. These attributes can be changed over time.</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ManagedApplicationAttributes</code>.</p></td></tr><tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array</p></td><td><p>Array of managed bundle identifiers, as strings.</p></td></tr></table></div><p>The device replies with a dictionary that contains the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ApplicationAttributes</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries.</p></td></tr></table></div><p>Each member of the <code>ApplicationAttributes</code> array is a dictionary with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s bundle identifier.</p></td></tr><tr><td scope="row"><p><code>Attributes</code></p></td><td><p>Dictionary</p></td><td><p>Optional. The current attributes for the application.</p></td></tr></table></div><p>The keys that can appear in the <code>Attributes</code> dictionary are listed below:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>VPNUUID</code></p></td><td><p>String</p></td><td><p>Per-App VPN UUID assigned to this app.</p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW94" title="ManagedApplicationFeedback Retrieves Managed App Feedback"></a><h4 class="jump">ManagedApplicationFeedback Retrieves Managed App Feedback</h4><p>To send a <code>ManagedApplicationFeedback</code> command, the server sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ManagedApplicationFeedback</code>.</p></td></tr><tr><td scope="row"><p><code>Identifiers</code></p></td><td><p>Array</p></td><td><p>Array of managed bundle identifiers, as strings.</p></td></tr><tr><td scope="row"><p><code>DeleteFeedback</code></p></td><td><p>Boolean</p></td><td><p>Optional. If <code>true</code>, the application’s feedback dictionary is deleted after it is read.</p></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW95" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>ManagedApplicationFeedback</code> command requires that the server have the App Management right. Queries about apps that are not managed are ignored.</p><p></p></aside></div><p>In response, the device sends a dictionary containing the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>ManagedApplicationFeedback</code></p></td><td><p>Array</p></td><td><p>An array of dictionaries, one per app.</p></td></tr></table></div><p>Each member of the <code>ApplicationConfigurations</code> array is a dictionary with the following keys:</p><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr><tr><td scope="row"><p><code>Identifier</code></p></td><td><p>String</p></td><td><p>The application’s bundle identifier.</p></td></tr><tr><td scope="row"><p><code>Feedback</code></p></td><td><p>Dictionary</p></td><td><p>Optional. The current feedback dictionary. If the app has no feedback dictionary, this key is absent.</p></td></tr></table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW105" title="AccountConfiguration"></a><h3 class="jump">AccountConfiguration</h3>
<p>When a macOS (v10.11 and later) device is configured via DEP to enroll in an MDM server and the DEP profile has the <code>await_device_configuration</code> flag set to true, the <code>AccountConfiguration</code> command can be sent to the device to have it create the local administrator account (thereby skipping the page to create this account in Setup Assistant). This command can only be sent to a macOS device that is in the <code>AwaitingConfiguration</code> state.</p>
<p>The <code>AccountConfiguration</code> command replaces the <code>SetupConfiguration</code> command, which is deprecated. While both commands remain supported, new software should use <code>AccountConfiguration</code>.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>RequestType</code></p></td>
<td><p>String</p></td>
<td><p><code>AccountConfiguration</code>.</p></td></tr>
<tr><td scope="row"><p><code>SkipPrimarySetupAccountCreation</code></p></td>
<td><p>Boolean</p></td>
<td><p>(Optional, default=false). If true, skip the UI for setting up the primary accounts. Setting this key to true requires that an entry be specified in <code>AutoSetupAdminAccounts</code>. Setting this value to true also prevents auto login after Setup Assistant completes.</p></td></tr>
<tr><td scope="row"><p><code>SetPrimarySetupAccountAsRegularUser</code></p></td>
<td><p>Boolean</p></td>
<td><p>(Optional, default=false). If true, the primary accounts are created as regular users. Setting this to true requires that an entry be specified in <code>AutoSetupAdminAccounts</code>.</p></td></tr>

<tr><td scope="row"><p><code>AutoSetupAdminAccounts</code></p></td>
<td><p>Array of Dictionaries</p></td>
<td><p>(Required if either of the above options are true) Describes the admin accounts to be created by Setup Assistant (see below). Currently, macOS creates only a single admin account. Array elements after the first are ignored.</p></td></tr>




</table></div>

<p>The <code>AutoSetupAdminAccounts</code> dictionaries contain the specifications of local administrator accounts to be created before Setup Assistant finishes:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">

<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>shortName</code></p></td>
<td><p>String</p></td>
<td><p>The short name of the user.</p></td></tr>
<tr><td scope="row"><p><code>fullName</code></p></td>
<td><p>String</p></td>
<td><p>(Optional) string of full user name. This defaults to <code>shortName</code> if not specified.</p></td></tr>
<tr><td scope="row"><p><code>passwordHash</code></p></td>
<td><p>Data</p></td>
<td><p>Contains the pre-created salted PBKDF2 SHA512 password hash for the account (see below).</p></td></tr>
<tr><td scope="row"><p><code>hidden</code></p></td>
<td><p>Boolean</p></td>
<td><p>(Optional, default=false) If true, this sets the account attribute to make the account hidden to <code>loginwindow</code> and Users&amp;Groups. OD attribute: <code>dsAttrTypeNative:IsHidden</code>.</p></td></tr>
</table></div>



<p>The <code>passwordHash</code> data objects should be created on the server using the CommonCrypto libraries or equivalent as a salted SHA512 PBKDF2 dictionary containing three items: <code>entropy</code> is the derived key from the password hash (an example is from <code>CCKeyDerivationPBKDF()</code>), <code>salt</code> is the 32 byte randomized salt (from <code>CCRandomCopyBytes()</code>), and <code>iterations</code> contains the number of iterations (from <code>CCCalibratePBKDF()</code>) using a minimum hash time of 100 milliseconds (or if not known, a number in the range 20,000 to 40,000 iterations). This dictionary of the three keys should be placed into an outer dictionary under the key <code>SALTED-SHA512-PBKDF2</code> and converted to binary data before being set into the configuration dictionary <code>passwordHash</code> key value.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW180" title="Firmware (EFI) Password Management"></a><h3 class="jump">Firmware (EFI) Password Management</h3>
<p>Starting with macOS 10.13, two commands, <code>SetFirmwarePassword</code> and <code>VerifyFirmwarePassword</code>, let MDM manage firmware passwords.</p>
<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;
There is no way through software to clear an EFI password without knowing the current password. Therefore, if an EFI password is set before MDM can manage it, there is no way for MDM to change it unless the server provides a way of prompting an administrator to enter the current password.</p><p></p></aside></div>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW181" title="SetFirmwarePassword"></a><h4 class="jump">SetFirmwarePassword</h4>
<p>This command changes or clears the firmware password for the device. It requires the Device Lock and Passcode Removal Right and may be sent only on the device channel.</p>
<p>The request dictionary has these keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>SetFirmwarePassword</code>.</p></td></tr>
<tr><td scope="row"><p><code>CurrentPassword</code></p></td><td><p>String</p></td><td><p>Required if the device currently has a firmware password set.</p></td></tr>
<tr><td scope="row"><p><code>NewPassword</code></p></td><td><p>String</p></td><td><p>(Required) Pass an empty string to clear the firmware password</p></td></tr>
<tr><td scope="row"><p><code>AllowOroms</code></p></td><td><p>Boolean</p></td><td><p>Pass <code>true</code> if option ROMs are to be enabled. Default is <code>false</code>.</p></td></tr>
</table></div>
<p>The response dictionary has this key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>PasswordChanged</code></p></td><td><p>Boolean</p></td><td><p>Indicates success or failure. In case of failure, <code>ErrorChain</code> may provide additional error information.</p></td></tr>
</table></div>
<p>This command will force the firmware password mode to a value of <code>command</code>. It will prompt the user only if MDM is attempting to option+boot to a different volume.</p>
<p>The characters in <code>NewPassword</code> must consist of low-ASCII printable characters (0x20 .. 0x7E) to ensure that all characters can be entered on the EFI login screen. This is a subset of the characters allowed in the EFI login window. However, since the exact allowed character set is not well-defined, the <code>SetFirmwarePassword</code> command is conservative in limiting the characters it allows.</p>
<p>The device imust be restarted for the new firmware password to take effect. This command will fail and return an error in <code>ErrorChain</code> if the device has a firmware change pending; see <code>ChangePending</code> in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW423" data-renderer-version="1">Table 11</a></span>.</p>
<p>This command will return an error if it is called again within 30 seconds after providing an incorrect password.</p>
</section>
<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW182" title="VerifyFirmwarePassword"></a><h4 class="jump">VerifyFirmwarePassword</h4>
<p>This command verifies the device’s firmware password. It may be sent only on the device channel.</p>
<p>The request dictionary has these keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>VerifyFirmwarePassword</code>.</p></td></tr>
<tr><td scope="row"><p><code>Password</code></p></td><td><p>String</p></td><td><p>(Required) The password to be verified.</p></td></tr>
</table></div>
<p>The response dictionary has this key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>PasswordVerified</code></p></td><td><p>Boolean</p></td><td><p>Whether or not the provided password matches the firmware password set for the device.</p></td></tr>
</table></div>
<p>This command delays for 30 seconds so it won’t execute too often. If another request is received within that interval, this command will return <code>false</code> and set an error in <code>ErrorChain</code>.</p>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW300" title="SetAutoAdminPassword"></a><h3 class="jump">SetAutoAdminPassword</h3>
<p><code>SetAutoAdminPassword</code> allows changing the password of a local admin account that was created by Setup Assistant during DEP enrollment via the <code>AccountConfiguration</code> command. It is available in macOS v10.11 and later.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>SetAutoAdminPassword</code>.</p></td></tr>
<tr><td scope="row"><p><code>GUID</code></p></td>
<td><p>String</p></td>
<td><p>The Globally Unique Identifier of the local admin account for which the password is to be changed. If this string does not correspond to the GUID of an admin account created during DEP enrollment, the command returns an error.</p></td></tr>
<tr><td scope="row"><p><code>passwordHash</code></p></td>
<td><p>Data</p></td>
<td><p>Contains the pre-created salted PBKDF2 SHA512 password hash for the account (see below).</p></td></tr>
</table></div>
<p>The <code>passwordHash</code> data objects should be created on the server using the CommonCrypto libraries or equivalent as a salted SHA512 PBKDF2 dictionary containing three items: <code>entropy</code> is the derived key from the password hash (an example is from <code>CCKeyDerivationPBKDF()</code>), <code>salt</code> is the 32 byte randomized salt (from <code>CCRandomCopyBytes()</code>), and <code>iterations</code> contains the number of iterations (from <code>CCCalibratePBKDF()</code>) using a minimum hash time of 100 milliseconds (or if not known, a number in the range 20,000 to 40,000 iterations). This dictionary of the three keys should be placed into an outer dictionary under the key <code>SALTED-SHA512-PBKDF2</code> and converted to binary data before being set into the configuration dictionary <code>passwordHash</code> key value.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW301" title="DeviceConfigured"></a><h3 class="jump">DeviceConfigured</h3>
<p><code>DeviceConfigured</code> informs the device that it can continue past DEP enrollment. It works only on devices in DEP that have their cloud configuration set to await configuration.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>DeviceConfigured</code>.</p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW302" title="Software Update"></a><h3 class="jump">Software Update</h3>
<p>The Software Update commands allow an MDM server to perform software updates. In macOS, a variety of system software can be updated. In iOS, only OS updates are supported.</p>
<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;
If the device has a passcode, it must be cleared before an iOS update is performed.</p><p></p></aside></div>
<p>Only Supervised DEP-enrolled iOS devices and DEP-managed Mac computers are eligible for software update management. However, the <code>AvailableOSUpdates</code> query is available to non-DEP managed devices.</p>
<p>The MDM server must have the App Installation right to perform these commands.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW311" title="ScheduleOSUpdate"></a><h4 class="jump">ScheduleOSUpdate</h4>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ScheduleOSUpdate</code>.</p></td></tr>
<tr><td scope="row"><p>Updates</p></td><td><p>Array</p></td><td><p>An array of dictionaries specifying the OS updates to download or install. If this entry is missing, the device applies the default behavior for all available updates.</p></td></tr>
</table></div>
<p>The Updates array contains dictionaries with the following keys and values:</p>

<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>ProductKey</code></p></td><td><p>String</p></td><td><p>The product key of the update to be installed.</p></td></tr>
<tr><td scope="row"><p><code>InstallAction</code></p></td><td><p>String</p></td><td><p>One of the following:</p>
<ul class="threeHead">
<li class="li"><p><code>Default</code>: Download and/or install the software update, depending on the current device state. See the <code>UpdateResults</code> dictionary, below, to determine which <code>InstallAction</code> is scheduled.</p></li>
<li class="li"><p><code>DownloadOnly</code>: Download the software update without installing it.</p></li>
<li class="li"><p><code>InstallASAP</code>: Install an already downloaded software update.</p></li>
<li class="li"><p><code>NotifyOnly</code>: Download the software update and notify the user via the App Store (macOS only).</p></li>
<li class="li"><p><code>InstallLater</code>: Download the software update and install it at a later time (macOS only).</p></li>
</ul>
</td></tr>
</table></div>
<p>The device returns the following response:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>UpdateResults</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries.</p></td></tr>
</table></div>
<p>The <code>UpdateResults</code> dictionary contains the following keys and values:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>ProductKey</code></p></td><td><p>String</p></td><td><p>The product key.</p></td></tr>
<tr><td scope="row"><p><code>InstallAction</code></p></td><td><p>String</p></td><td><p>The install action that the device has scheduled for this update. One of the following:</p>
<ul class="threeHead">
<li class="li"><p><code>Error</code>: An error occurred during scheduling.</p></li>
<li class="li"><p><code>DownloadOnly</code>: Download the software update without installing it.</p></li>
<li class="li"><p><code>InstallASAP</code>: Install an already downloaded software update.</p></li>

<li class="li"><p><code>NotifyOnly</code>: Download the software update and notify the user via the App Store (macOS only).</p></li>
<li class="li"><p><code>InstallLater</code>: Download the software update and install it at a later time (macOS only).</p></li>
</ul>
</td></tr>
<tr><td scope="row"><p><code>Status</code></p></td><td><p>String</p></td><td><p>The status of the software update. Possible values are:</p>
<ul class="threeHead">
<li class="li"><p><code>Idle</code>: No action is being taken on this software update.</p></li>
<li class="li"><p><code>Downloading</code>: The software update is being downloaded.</p></li>
<li class="li"><p><code>DownloadFailed</code>: The download has failed.</p></li>
<li class="li"><p><code>DownloadRequiresComputer</code>: The device must be connected to a computer to download this update (iOS only).</p></li>
<li class="li"><p><code>DownloadInsufficientSpace</code>: There is not enough space to download the update.</p></li>
<li class="li"><p><code>DownloadInsufficientPower</code>: There is not enough power to download the update.</p></li>
<li class="li"><p><code>DownloadInsufficientNetwork</code>: There is insufficient network capacity to download the update.</p></li>
<li class="li"><p><code>Installing</code>: The software update is being installed.</p></li>
<li class="li"><p><code>InstallInsufficientSpace</code>: There is not enough space to install the update.</p></li>
<li class="li"><p><code>InstallInsufficientPower</code>: There is not enough power to install the update.</p></li>
<li class="li"><p><code>InstallPhoneCallInProgress</code>: Installation has been rejected because a phone call is in progress.</p></li>
<li class="li"><p><code>InstallFailed</code>: Installation has failed for an unspecified reason.</p></li>
</ul>
</td></tr>
<tr><td scope="row"><p><code>ErrorChain</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries describing the error that occurred.</p></td></tr>
</table></div>
<p>The device may return a different <code>InstallAction</code> than the one that was requested.</p>

<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40017387-CH3-SW721" title="Note"></a><p><strong>Note:</strong>&nbsp;
In iOS versions before 10.3, responding to the <code>ScheduleOSUpdate</code> request relied on the device not being passcode-protected.</p><p></p></aside></div>



<p>Because software updates may happen immediately, the device may not have the opportunity to respond to an installation command before it restarts for installation. When this happens, the MDM server should resend the <code>ScheduleOSUpdate</code> request when the device checks in again. The device returns a status of <code>Idle</code> because the update has been installed and is no longer applicable.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW321" title="ScheduleOSUpdateScan"></a><h4 class="jump">ScheduleOSUpdateScan</h4>
<p><code>ScheduleOSUpdateScan</code> requests that the device perform a background scan for OS updates.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>ScheduleOSUpdateScan</code>.</p></td></tr>
<tr><td scope="row"><p><code>Force</code></p></td><td><p>Boolean</p></td><td><p>If set to <code>true</code>, force a scan to start immediately. Otherwise, the scan occurs at a system-determined time. Defaults to <code>false</code>.</p></td></tr>
</table></div>
<p>The device returns the following response:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>ScanInitiated</code></p></td><td><p>Boolean</p></td><td><p>Returns true if the scan was successfully initiated (macOS only).
</p></td></tr>
</table></div>
<p>This command is needed by macOS only. iOS devices respond with an <code>Acknowledged</code> status on success.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW331" title="AvailableOSUpdates"></a><h4 class="jump">AvailableOSUpdates</h4>
<p><code>AvailableOSUpdates</code> queries the device for a list of available OS updates. In macOS, a <code>ScheduleOSUpdateScan</code> must be performed to update the results returned by this query.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType</code></p></td><td><p>String</p></td><td><p><code>AvailableOSUpdates</code>.</p></td></tr>
</table></div>
<p>The device returns the following dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>AvailableOSUpdates</code></p></td><td><p>Array</p></td><td><p>Array of dictionaries.</p></td></tr>
</table></div>
<p>Each element in the AvailableOSUpdates array contains a dictionary with the following keys and values:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>ProductKey</code></p></td><td><p>String</p></td><td><p>The product key that represents this update.</p></td></tr>
<tr><td scope="row"><p><code>HumanReadableName</code></p></td><td><p>String</p></td><td><p>The human-readable name of the software update, in the current user’s current locale.</p></td></tr>
<tr><td scope="row"><p><code>ProductName</code></p></td><td><p>String</p></td><td><p>The product name: e.g., iOS.</p></td></tr>
<tr><td scope="row"><p><code>Version</code></p></td><td><p>String</p></td><td><p>The version of the update: e.g., 9.0.</p></td></tr>
<tr><td scope="row"><p><code>Build</code></p></td><td><p>String</p></td><td><p>
The build number of the update: e.g., 13A999.</p></td></tr>



<tr><td scope="row"><p><code>DownloadSize</code></p></td><td><p>Number</p></td><td><p>Storage size needed to download the software update. Floating point number of bytes.</p></td></tr>
<tr><td scope="row"><p><code>InstallSize</code></p></td><td><p>Number</p></td><td><p>Storage size needed to install the software update. Floating point number of bytes.</p></td></tr>
<tr><td scope="row"><p><code>AppIdentifiersToClose</code></p></td><td><p>Array</p></td><td><p>Array of strings. Each entry represents an app identifier that is closed to install this update (macOS only).</p></td></tr>
<tr><td scope="row"><p><code>IsCritical</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if this update is considered critical. Defaults to <code>false</code>.</p></td></tr>
<tr><td scope="row"><p><code>IsConfigurationDataUpdate</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if this is an update to a configuration file. Defaults to <code>false</code> (macOS only).</p></td></tr>
<tr><td scope="row"><p><code>IsFirmwareUpdate</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if this is an update to firmware. Defaults to <code>false</code> (macOS only).</p></td></tr>
<tr><td scope="row"><p><code>RestartRequired</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the device restarts after this update is installed. Defaults to <code>false</code>.</p></td></tr>
<tr><td scope="row"><p><code>AllowsInstallLater</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the update is eligible for InstallLater. Defaults to <code>true</code>.</p></td></tr>
</table></div>
<p>A total of <code>DownloadSize + InstallSize</code> bytes is needed to successfully install a software update.</p>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW341" title="OSUpdateStatus"></a><h4 class="jump">OSUpdateStatus</h4>
<p><code>OSUpdateStatus</code> queries the device for the status of software updates.</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>RequestType 
</code></p></td><td><p>String</p></td><td><p><code>OSUpdateStatus</code>.</p></td></tr>
</table></div>
<p>The device responds with the following dictionary:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>OSUpdateStatus</code>.</p></td><td><p>Array</p></td><td><p>Array of dictionaries.</p></td></tr>
</table></div>
<p>Each entry in the <code>OSUpdateStatus</code> array is a dictionary with the following keys and values:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>
<tr><td scope="row"><p><code>ProductKey</code></p></td><td><p>String</p></td><td><p>The product key.</p></td></tr>
<tr><td scope="row"><p><code>IsDownloaded</code></p></td><td><p>Boolean</p></td><td><p>Set to <code>true</code> if the update has been downloaded.</p></td></tr>
<tr><td scope="row"><p><code>DownloadPercentComplete</code></p></td><td><p>Number</p></td><td><p>
Percentage of download that is complete. Floating point number (0.0 to 1.0).</p></td></tr>
<tr><td scope="row"><p><code>Status</code></p></td><td><p>String</p></td><td><p>The status of this update. Possible values are:</p>
<ul class="threeHead">
<li class="li"><p><code>Idle</code>: No action is being taken on this software update.</p></li>
<li class="li"><p><code>Downloading</code>: The software update is being downloaded.</p></li>
<li class="li"><p><code>Installing</code>: The software update is being installed. This status may not be returned if the device must reboot during installation.</p></li>
</ul>
</td></tr>
</table></div>
</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW901" title="Support for macOS Requests"></a><h3 class="jump">Support for macOS Requests</h3>
<p>The table below lists the MDM protocol request types that are available for Apple devices that run macOS. The interfaces of these requests to macOS are similar to the iOS interfaces described in the rest of this chapter.</p>
<a name="//apple_ref/doc/uid/TP40017387-CH3-SW902"></a><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">


<tr>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Command</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Min OS</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>User/Device</p></th>
<th scope="col" class="TableHeading_TableRow_TableCell"><p>Comments</p></th></tr>

<tr>
<td scope="row"><p>AccountConfiguration</p></td>
<td><p>10.11</p></td>
<td><p>Device</p></td>
<td><p>Valid only during DEP enrollment.</p></td></tr>
<tr>
<td scope="row"><p>AvailableOSUpdates</p></td>
<td><p>10.11</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>CertificateList</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>DeviceConfigured</p></td>
<td><p>10.11</p></td>
<td><p>Both</p></td>
<td><p>Valid only during DEP enrollment.</p></td></tr>
<tr>
<td scope="row"><p>DeviceInformation</p></td>
<td><p>10.7</p></td>
<td><p>Varies</p></td>
<td><p>See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW15" data-renderer-version="1">DeviceInformation Commands Get Information About the Device</a></span>.</p></td>
</tr>
<tr>
<td scope="row"><p>DeviceLock</p></td>
<td><p>10.7</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>EraseDevice</p></td>
<td><p>10.7</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>
<tr>
<td rowspan="3" scope="row"><p>InstallApplication</p></td>
<td><p>10.9</p></td>
<td><p>User</p></td>
<td><p>For VPP (<code>iTunesStoreID</code>, <code>Identifier</code>).</p></td></tr>
<tr>
<td scope="row"><p>10.10</p></td>
<td><p>Device</p></td>
<td><p><code>ManifestURL</code>.</p></td></tr>
<tr>
<td scope="row"><p>10.11</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>InstalledApplicationList</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>InstallMedia</p></td>
<td><p>10.9</p></td>
<td><p>User</p></td>
<td><p>For VPP books only.</p></td></tr>

<tr>
<td scope="row"><p>InstallProfile</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>InviteToProgram</p></td>
<td><p>10.9</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>OSUpdateStatus</p></td>
<td><p>10.11.5</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>ProfileList</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>
<tr>
<td scope="row"><p>ProvisioningProfileList</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p>Supported, but always returns empty list.</p></td></tr>
<tr>
<td scope="row"><p>RemoveProfile</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>RequestMirroring</p></td>
<td><p>10.10</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>Restrictions</p></td>
<td><p>10.7</p></td>
<td><p>Both</p></td>
<td><p>Supported, but always returns empty list.</p></td></tr>

<tr>
<td scope="row"><p>RotateFileVaultKey</p></td>
<td><p>10.9</p></td>
<td><p>Device</p></td>
<td><p>See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW566" data-renderer-version="1">Using the RotateFileVaultKey Command</a></span>.</p></td></tr>

<tr>
<td scope="row"><p>ScheduleOSUpdate</p></td>
<td><p>10.11</p></td>
<td><p>Device</p></td>
<td><p>Requires DEP enrolled computer.</p></td></tr>
<tr>
<td scope="row"><p>ScheduleOSUpdateScan</p></td>
<td><p>10.11</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>SecurityInfo</p></td>
<td><p>10.7</p></td>
<td><p>Varies</p></td>
<td><p>See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40017387-CH3-SW19" data-renderer-version="1">SecurityInfo Commands Request Security-Related Information</a></span>.</p></td>
</tr>

<tr>
<td scope="row"><p>SetAutoAdminPassword</p></td>
<td><p>10.11</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>

<tr>
<td scope="row"><p>Settings</p></td>
<td><p>10.9</p></td>
<td><p>varies</p></td>
<td><p>DeviceName (device), OrganizationInfo (device).</p></td></tr>

<tr>
<td scope="row"><p>StopMirroring</p></td>
<td><p>10.10</p></td>
<td><p>Device</p></td>
<td><p> </p></td></tr>



</table></div>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW566" title="Using the RotateFileVaultKey Command"></a><h4 class="jump">Using the RotateFileVaultKey Command</h4>
<p>Resetting a device deployment’s <code>FileVaultMaster.keychain</code> password periodically through Master Password rotation helps mitigate the risk of compromising the security of the deployed devices. For further information about this technique, see Apple’s <em>Best Practices for Deploying FileVault 2</em>, page 36, at <span class="content_text"><a href="http://training.apple.com/pdf/WP_FileVault2.pdf" class="urlLink" rel="external">training.apple.com/pdf/WP_FileVault2.pdf</a></span>.</p>
<p>The <code>RotateFileVaultKey</code> command requires the access right “Device Lock and Passcode Removal” and is processed only if sent to the device channel. To send a <code>RotateFileVaultKey</code> command, the server sends a dictionary containing the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>RequestType</code></p></td>
<td><p>String</p></td>
<td><p><code>RotateFileVaultKey</code>.</p></td>
</tr>
<tr><td scope="row"><p><code>KeyType</code></p></td>
<td><p>String</p></td>
<td><p>Either <code>'personal'</code> or <code>'institutional'</code> (see below).</p></td>
</tr>
<tr><td scope="row"><p><code>FileVaultUnlock</code></p></td>
<td><p>Dictionary</p></td>
<td><p>See below.</p></td>
</tr>
<tr><td scope="row"><p><code>NewCertificate</code></p></td>
<td><p>Data</p></td>
<td><p>Required if <code>KeyType</code> is set to <code>institutional</code>. A DER-encoded certificate to be used in creating a new institutional recovery key. The certificate must have a common name containing “FileVault Recovery Key” and meet other requirements specified in Apple’s <em>Best Practices for Deploying FileVault 2</em> (<span class="content_text"><a href="http://training.apple.com/pdf/WP_FileVault2.pdf" class="urlLink" rel="external">training.apple.com/pdf/WP_FileVault2.pdf</a></span>).</p></td>
</tr>
<tr><td scope="row"><p><code>ReplyEncryptionCertificate</code></p></td>
<td><p>Data</p></td>
<td><p>Required if <code>KeyType</code> is set to <code>personal</code>. A DER-encoded certificate to be used in encrypting the new personal recovery key into a wrapper conforming to the IETF Cryptographic Message Syntax (CMS) standard.</p></td>
</tr>
</table></div>

<p>To unlock a device by means of a password, <code>KeyType</code> must be set to <code>personal</code> and the <code>FileVaultUnlock</code> dictionary must contain this key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>Password</code></p></td>
<td><p>String</p></td>
<td><p>A FileVault user’s password, or if using a CoreStorage volume, the current Personal Recovery Key (PRK).</p></td>
</tr>
</table></div>

<p>To unlock a device using the institutional recovery key, <code>KeyType</code> must be set to <code>institutional</code> and the <code>FileVaultUnlock</code> dictionary must contain the following keys:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>PrivateKeyExport</code></p></td>
<td><p>Data</p></td>
<td><p>The data for a .p12 export of the private key for the current institutional recovery key.</p></td>
</tr>
<tr><td scope="row"><p><code>PrivateKeyExportPassword</code></p></td>
<td><p>String</p></td>
<td><p>The password for the <code>PrivateKeyExport</code>.p12 data (see above).</p></td>
</tr>
</table></div>

<p>If the device is unlocked by means of a personal password, the response sent back to MDM server will be embedded within a <code>RotateResult</code> dictionary containing the following key:</p>
<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>Key</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Type</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>Content</p></th></tr>

<tr><td scope="row"><p><code>EncryptedNewRecoveryKey</code></p></td>
<td><p>Data</p></td>
<td><p>A new PRK that is encrypted using a <code>ReplyEncryptionCertificate</code> as a CMS-compliant envelope.</p></td>
</tr>
</table></div>
<p>If the device is unlocked using the institutional recovery key, no response will be needed and no dictionary will be sent.</p>
</section>

</section>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-SW77" title="Error Codes"></a><h2 class="jump">Error Codes</h2><p>The following sections list the error codes currently returned by iOS and macOS devices. Your software should <em>not</em> depend on these values, because they may change in future operating system releases. They are provided solely for informational purposes.</p>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_2" title="MCProfileErrorDomain "></a><h3 class="jump">MCProfileErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 1000 </p></td><td><p> Malformed profile </p></td></tr><tr><td scope="row"><p> 1001 </p></td><td><p> Unsupported profile version </p></td></tr><tr><td scope="row"><p> 1002 </p></td><td><p> Missing required field </p></td></tr><tr><td scope="row"><p> 1003 </p></td><td><p> Bad data type in field </p></td></tr><tr><td scope="row"><p> 1004 </p></td><td><p> Bad signature </p></td></tr><tr><td scope="row"><p> 1005 </p></td><td><p> Empty profile </p></td></tr><tr><td scope="row"><p> 1006 </p></td><td><p> Cannot decrypt </p></td></tr><tr><td scope="row"><p> 1007 </p></td><td><p> Non-unique UUIDs </p></td></tr><tr><td scope="row"><p> 1008 </p></td><td><p> Non-unique payload identifiers </p></td></tr><tr><td scope="row"><p> 1009 </p></td><td><p> Profile installation failure </p></td></tr><tr><td scope="row"><p> 1010 </p></td><td><p> Unsupported field value </p></td></tr></table></div><p></p></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_3" title="MCPayloadErrorDomain "></a><h3 class="jump">MCPayloadErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 2000 </p></td><td><p> Malformed payload </p></td></tr><tr><td scope="row"><p> 2001 </p></td><td><p> Unsupported payload version </p></td></tr><tr><td scope="row"><p> 2002 </p></td><td><p> Missing required field </p></td></tr><tr><td scope="row"><p> 2003 </p></td><td><p> Bad data type in field </p></td></tr><tr><td scope="row"><p> 2004 </p></td><td><p> Unsupported field value </p></td></tr>
<tr><td scope="row"><p> 2005 </p></td><td><p> Internal Error </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_4" title="MCRestrictionsErrorDomain "></a><h3 class="jump">MCRestrictionsErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 3000 </p></td><td><p> Inconsistent restriction sense (internal error) </p></td></tr><tr><td scope="row"><p> 3001 </p></td><td><p> Inconsistent value comparison sense (internal error) </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_5" title="MCInstallationErrorDomain "></a><h3 class="jump">MCInstallationErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 4000 </p></td><td><p> Cannot parse profile </p></td></tr><tr><td scope="row"><p> 4001 </p></td><td><p> Installation failure </p></td></tr><tr><td scope="row"><p> 4002 </p></td><td><p> Duplicate UUID </p></td></tr><tr><td scope="row"><p> 4003 </p></td><td><p> Profile not queued for installation </p></td></tr><tr><td scope="row"><p> 4004 </p></td><td><p> User cancelled installation </p></td></tr><tr><td scope="row"><p> 4005 </p></td><td><p> Passcode does not comply </p></td></tr><tr><td scope="row"><p> 4006 </p></td><td><p> Profile removal date is in the past </p></td></tr><tr><td scope="row"><p> 4007 </p></td><td><p> Unrecognized file format </p></td></tr><tr><td scope="row"><p> 4008 </p></td><td><p> Mismatched certificates </p></td></tr><tr><td scope="row"><p> 4009 </p></td><td><p> Device locked </p></td></tr><tr><td scope="row"><p> 4010 </p></td><td><p> Updated profile does not have the same identifier </p></td></tr><tr><td scope="row"><p> 4011 </p></td><td><p> Final profile is not a configuration profile </p></td></tr><tr><td scope="row"><p> 4012 </p></td><td><p> Profile is not updatable </p></td></tr><tr><td scope="row"><p> 4013 </p></td><td><p> Update failed </p></td></tr><tr><td scope="row"><p> 4014 </p></td><td><p> No device identity available </p></td></tr><tr><td scope="row"><p> 4015 </p></td><td><p> Replacement profile does not contain an MDM payload </p></td></tr><tr><td scope="row"><p> 4016 </p></td><td><p> Internal error </p></td></tr><tr><td scope="row"><p> 4017 </p></td><td><p> Multiple global HTTPProxy payloads </p></td></tr><tr><td scope="row"><p> 4018 </p></td><td><p> Multiple APN or Cellular payloads </p></td></tr><tr><td scope="row"><p> 4019 </p></td><td><p> Multiple App Lock payloads
</p></td></tr><tr><td scope="row"><p> 4020 </p></td><td><p> UI installation prohibited </p></td></tr><tr><td scope="row"><p> 4021 </p></td><td><p> Profile must be installed non-interactively </p></td></tr><tr><td scope="row"><p> 4022 </p></td><td><p> Profile must be installed using MDM </p></td></tr><tr><td scope="row"><p> 4023 </p></td><td><p> Unacceptable payload </p></td></tr><tr><td scope="row"><p> 4024 </p></td><td><p> Profile not found </p></td></tr><tr><td scope="row"><p> 4025 </p></td><td><p> Invalid supervision
</p></td></tr><tr><td scope="row"><p> 4026 </p></td><td><p> Removal date in the past </p></td></tr><tr><td scope="row"><p> 4027 </p></td><td><p> Profile requires passcode change </p></td></tr><tr><td scope="row"><p> 4028 </p></td><td><p> Multiple home screen layout payloads </p></td></tr><tr><td scope="row"><p> 4029 </p></td><td><p> Multiple notification settings layout payloads </p></td></tr><tr><td scope="row"><p> 4030 </p></td><td><p> Unacceptable payload in Shared iPad </p></td></tr><tr><td scope="row"><p> 4031 </p></td><td><p> Payload contains sensitive user information </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_6" title="MCPasscodeErrorDomain "></a><h3 class="jump">MCPasscodeErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 5000 </p></td><td><p> Passcode too short </p></td></tr><tr><td scope="row"><p> 5001 </p></td><td><p> Too few unique characters </p></td></tr><tr><td scope="row"><p> 5002 </p></td><td><p> Too few complex characters </p></td></tr><tr><td scope="row"><p> 5003 </p></td><td><p> Passcode has repeating characters </p></td></tr><tr><td scope="row"><p> 5004 </p></td><td><p> Passcode has ascending descending characters </p></td></tr><tr><td scope="row"><p> 5005 </p></td><td><p> Passcode requires number </p></td></tr><tr><td scope="row"><p> 5006 </p></td><td><p> Passcode requires alpha characters </p></td></tr><tr><td scope="row"><p> 5007 </p></td><td><p> Passcode expired </p></td></tr><tr><td scope="row"><p> 5008 </p></td><td><p> Passcode too recent </p></td></tr><tr><td scope="row"><p> 5009 </p></td><td><p> (unused) </p></td></tr><tr><td scope="row"><p> 5010 </p></td><td><p> Device locked </p></td></tr><tr><td scope="row"><p> 5011 </p></td><td><p> Wrong passcode </p></td></tr><tr><td scope="row"><p> 5012 </p></td><td><p> (unused) </p></td></tr><tr><td scope="row"><p> 5013 </p></td><td><p> Cannot clear passcode </p></td></tr><tr><td scope="row"><p> 5014 </p></td><td><p> Cannot set passcode </p></td></tr>
<tr><td scope="row"><p> 5015 </p></td><td><p> Cannot set grace period </p></td></tr>
<tr><td scope="row"><p> 5016 </p></td><td><p> Cannot set fingerprint unlock </p></td></tr>
<tr><td scope="row"><p> 5017 </p></td><td><p> Cannot set fingerprint purchase </p></td></tr>
<tr><td scope="row"><p> 5018 </p></td><td><p> Cannot set maximum failed passcode attempts </p></td></tr>
</table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_7" title="MCKeychainErrorDomain "></a><h3 class="jump">MCKeychainErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 6000 </p></td><td><p> Keychain system error </p></td></tr><tr><td scope="row"><p> 6001 </p></td><td><p> Empty string </p></td></tr><tr><td scope="row"><p> 6002 </p></td><td><p> Cannot create query </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_8" title="MCEmailErrorDomain "></a><h3 class="jump">MCEmailErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 7000 </p></td><td><p> Host unreachable </p></td></tr><tr><td scope="row"><p> 7001 </p></td><td><p> Invalid credentials </p></td></tr><tr><td scope="row"><p> 7002 </p></td><td><p> Unknown error occurred during validation </p></td></tr><tr><td scope="row"><p> 7003 </p></td><td><p> SMIME certificate not found </p></td></tr><tr><td scope="row"><p> 7004 </p></td><td><p> SMIME certificate is bad </p></td></tr><tr><td scope="row"><p> 7005 </p></td><td><p> IMAP account is misconfigured </p></td></tr><tr><td scope="row"><p> 7006 </p></td><td><p> POP account is misconfigured </p></td></tr><tr><td scope="row"><p> 7007 </p></td><td><p> SMTP account is misconfigured </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_9" title="MCWebClipErrorDomain "></a><h3 class="jump">MCWebClipErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 8000 </p></td><td><p> Cannot install Web Clip </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_10" title="MCCertificateErrorDomain "></a><h3 class="jump">MCCertificateErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 9000 </p></td><td><p> Invalid password </p></td></tr><tr><td scope="row"><p> 9001 </p></td><td><p> Too many certificates in a payload </p></td></tr><tr><td scope="row"><p> 9002 </p></td><td><p> Cannot store certificate </p></td></tr><tr><td scope="row"><p> 9003 </p></td><td><p> Cannot store WAPI data </p></td></tr><tr><td scope="row"><p> 9004 </p></td><td><p> Cannot store root certificate </p></td></tr><tr><td scope="row"><p> 9005 </p></td><td><p> Certificate is malformed </p></td></tr><tr><td scope="row"><p> 9006 </p></td><td><p> Certificate is not an identity </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_11" title="MCDefaultsErrorDomain "></a><h3 class="jump">MCDefaultsErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 10000 </p></td><td><p> Cannot install defaults </p></td></tr><tr><td scope="row"><p> 10001 </p></td><td><p> Invalid signer </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_12" title="MCAPNErrorDomain "></a><h3 class="jump">MCAPNErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 11000 </p></td><td><p> Cannot install APN </p></td></tr><tr><td scope="row"><p> 11000 </p></td><td><p> Custom APN already installed </p></td></tr></table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_13" title="MCMDMErrorDomain "></a><h3 class="jump">MCMDMErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 12000 </p></td><td><p> Invalid access rights </p></td></tr><tr><td scope="row"><p> 12001 </p></td><td><p> Multiple MDM instances </p></td></tr><tr><td scope="row"><p> 12002 </p></td><td><p> Cannot check in </p></td></tr><tr><td scope="row"><p> 12003 </p></td><td><p> Invalid challenge response </p></td></tr><tr><td scope="row"><p> 12004 </p></td><td><p> Invalid push certificate </p></td></tr><tr><td scope="row"><p> 12005 </p></td><td><p> Cannot find certificate </p></td></tr><tr><td scope="row"><p> 12006 </p></td><td><p> Redirect refused </p></td></tr><tr><td scope="row"><p> 12007 </p></td><td><p> Not authorized </p></td></tr><tr><td scope="row"><p> 12008 </p></td><td><p> Malformed request </p></td></tr><tr><td scope="row"><p> 12009 </p></td><td><p> Invalid replacement profile </p></td></tr><tr><td scope="row"><p> 12010 </p></td><td><p> Internal inconsistency error </p></td></tr><tr><td scope="row"><p> 12011 </p></td><td><p> Invalid MDM configuration </p></td></tr><tr><td scope="row"><p> 12012 </p></td><td><p> MDM replacement mismatch </p></td></tr><tr><td scope="row"><p> 12013 </p></td><td><p> Profile not managed </p></td></tr><tr><td scope="row"><p> 12014 </p></td><td><p> Provisioning profile not managed </p></td></tr><tr><td scope="row"><p> 12015 </p></td><td><p> Cannot get push token </p></td></tr><tr><td scope="row"><p> 12016 </p></td><td><p> Missing identity </p></td></tr><tr><td scope="row"><p> 12017 </p></td><td><p> Cannot create escrow keybag </p></td></tr><tr><td scope="row"><p> 12018 </p></td><td><p> Cannot copy escrow keybag data </p></td></tr><tr><td scope="row"><p> 12019 </p></td><td><p> Cannot copy escrow secret </p></td></tr><tr><td scope="row"><p> 12020 </p></td><td><p> Unauthorized by server </p></td></tr><tr><td scope="row"><p> 12021 </p></td><td><p> Invalid request type </p></td></tr><tr><td scope="row"><p> 12022 </p></td><td><p> Invalid topic </p></td></tr>

<tr><td scope="row"><p> 12023 </p></td><td><p> The iTunes Store ID of the application could not be validated </p></td></tr>

<tr><td scope="row"><p> 12024 </p></td><td><p> Could not validate app manifest </p></td></tr><tr><td scope="row"><p> 12025 </p></td><td><p> App already installed </p></td></tr>

<tr><td scope="row"><p> 12026 </p></td><td><p> License for app “&#60;app bundle ID&#62;” could not be found </p></td></tr>

<tr><td scope="row"><p> 12027 </p></td><td><p> Not an app </p></td></tr><tr><td scope="row"><p> 12028 </p></td><td><p> Not waiting for redemption </p></td></tr><tr><td scope="row"><p> 12029 </p></td><td><p> App not managed </p></td></tr><tr><td scope="row"><p> 12030 </p></td><td><p> Invalid URL </p></td></tr><tr><td scope="row"><p> 12031 </p></td><td><p> App installation disabled </p></td></tr><tr><td scope="row"><p> 12032 </p></td><td><p> Too many apps in manifest </p></td></tr><tr><td scope="row"><p> 12033 </p></td><td><p> Invalid manifest </p></td></tr><tr><td scope="row"><p> 12034 </p></td><td><p> URL is not HTTPS </p></td></tr><tr><td scope="row"><p> 12035 </p></td><td><p> App cannot be purchased </p></td></tr><tr><td scope="row"><p> 12036 </p></td><td><p> Cannot remove app in current state </p></td></tr><tr><td scope="row"><p> 12037 </p></td><td><p> Invalid redemption code </p></td></tr><tr><td scope="row"><p> 12038 </p></td><td><p> App not managed </p></td></tr><tr><td scope="row"><p> 12039 </p></td><td><p> (unused) </p></td></tr><tr><td scope="row"><p> 12040 </p></td><td><p> iTunes Store login required </p></td></tr><tr><td scope="row"><p> 12041 </p></td><td><p> Unknown language code </p></td></tr>
<tr><td scope="row"><p> 12042 </p></td><td><p> Unknown locale code </p></td></tr>
<tr><td scope="row"><p> 12043 </p></td><td><p> Media download failure </p></td></tr>
<tr><td scope="row"><p> 12044 </p></td><td><p> Invalid media type </p></td></tr>
<tr><td scope="row"><p> 12045 </p></td><td><p> Invalid media replacement type </p></td></tr>
<tr><td scope="row"><p> 12046 </p></td><td><p> Cannot validate media ID </p></td></tr>
<tr><td scope="row"><p> 12047 </p></td><td><p> Cannot find VPP assignment </p></td></tr>
<tr><td scope="row"><p> 12048 </p></td><td><p> No update available </p></td></tr>
<tr><td scope="row"><p> 12049 </p></td><td><p> Device passcode must be cleared </p></td></tr>
<tr><td scope="row"><p> 12050 </p></td><td><p> Update scan failed </p></td></tr>
<tr><td scope="row"><p> 12051 </p></td><td><p> Update download in progress </p></td></tr>
<tr><td scope="row"><p> 12052 </p></td><td><p> Update download complete </p></td></tr>
<tr><td scope="row"><p> 12053 </p></td><td><p> Update download requires computer </p></td></tr>
<tr><td scope="row"><p> 12054 </p></td><td><p> Insufficient space for update download </p></td></tr>
<tr><td scope="row"><p> 12055 </p></td><td><p> Insufficient power for update download </p></td></tr>
<tr><td scope="row"><p> 12056 </p></td><td><p> Insufficient network for update download </p></td></tr>
<tr><td scope="row"><p> 12057 </p></td><td><p> Update download failed </p></td></tr>
<tr><td scope="row"><p> 12058 </p></td><td><p> Update install in progress </p></td></tr>
<tr><td scope="row"><p> 12059 </p></td><td><p> Update install requires download </p></td></tr>
<tr><td scope="row"><p> 12060 </p></td><td><p> Insufficient space for update install </p></td></tr>
<tr><td scope="row"><p> 12061 </p></td><td><p> Insufficient power for update install </p></td></tr>
<tr><td scope="row"><p> 12062 </p></td><td><p> Update install failed </p></td></tr>
<tr><td scope="row"><p> 12063 </p></td><td><p> User rejected </p></td></tr>
<tr><td scope="row"><p> 12064 </p></td><td><p> License not found </p></td></tr>
<tr><td scope="row"><p> 12065 </p></td><td><p> System app </p></td></tr>
<tr><td scope="row"><p> 12066 </p></td><td><p> Could not enable MDM lost mode </p></td></tr>
<tr><td scope="row"><p> 12067 </p></td><td><p> Device not in MDM lost mode </p></td></tr>
<tr><td scope="row"><p> 12068 </p></td><td><p> Could not determine device location </p></td></tr>
<tr><td scope="row"><p> 12069 </p></td><td><p> Could not disable MDM lost mode </p></td></tr>
<tr><td scope="row"><p> 12070 </p></td><td><p> Cannot list users </p></td></tr>
<tr><td scope="row"><p> 12071 </p></td><td><p> Specified user does not exist </p></td></tr>
<tr><td scope="row"><p> 12072 </p></td><td><p> Specified user is logged in </p></td></tr>
<tr><td scope="row"><p> 12073 </p></td><td><p> Specified user has data to sync </p></td></tr>
<tr><td scope="row"><p> 12074 </p></td><td><p> Could not delete user </p></td></tr>
<tr><td scope="row"><p> 12075 </p></td><td><p> Specified profile not installed </p></td></tr>
<tr><td scope="row"><p> 12076 </p></td><td><p> Per-user connections not supported </p></td></tr>
<tr><td scope="row"><p> 12077 </p></td><td><p> System update not permitted with logged-in user </p></td></tr>
<tr><td scope="row"><p> 12078 </p></td><td><p> Invalid request type in MDM Lost mode </p></td></tr>
<tr><td scope="row"><p> 12079 </p></td><td><p> No MDM instance </p></td></tr>
<tr><td scope="row"><p> 12080 </p></td><td><p> Could not play Lost Mode sound </p></td></tr>
<tr><td scope="row"><p> 12081 </p></td><td><p> Not netwok tethered </p></td></tr>
</table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_14" title="MCWiFiErrorDomain "></a><h3 class="jump">MCWiFiErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 13000 </p></td><td><p> Cannot install </p></td></tr><tr><td scope="row"><p> 13001 </p></td><td><p> Username required </p></td></tr><tr><td scope="row"><p> 13002 </p></td><td><p> Password required </p></td></tr><tr><td scope="row"><p> 13003 </p></td><td><p> Cannot create Wi-Fi configuration </p></td></tr><tr><td scope="row"><p> 13004 </p></td><td><p> Cannot set up EAP </p></td></tr><tr><td scope="row"><p> 13005 </p></td><td><p> Cannot set up proxy </p></td></tr></table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_15" title="MCTunnelErrorDomain "></a><h3 class="jump">MCTunnelErrorDomain </h3>



<div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 14000 </p></td><td><p> Invalid field </p></td></tr><tr><td scope="row"><p> 14001 </p></td><td><p> Device locked </p></td></tr><tr><td scope="row"><p> 14002 </p></td><td><p> Cloud configuration already exists </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_16" title="MCVPNErrorDomain "></a><h3 class="jump">MCVPNErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 15000 </p></td><td><p> Cannot install VPN </p></td></tr><tr><td scope="row"><p> 15001 </p></td><td><p> Cannot remove VPN </p></td></tr><tr><td scope="row"><p> 15002 </p></td><td><p> Cannot lock network configuration </p></td></tr><tr><td scope="row"><p> 15003 </p></td><td><p> Invalid certificate </p></td></tr>
<tr><td scope="row"><p> 15004 </p></td><td><p> Internal error </p></td></tr>
<tr><td scope="row"><p> 15005 </p></td><td><p> Cannot parse VPN payload </p></td></tr>
</table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_17" title="MCSubCalErrorDomain "></a><h3 class="jump">MCSubCalErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 16000 </p></td><td><p> Cannot create subscription </p></td></tr><tr><td scope="row"><p> 16001 </p></td><td><p> No host name </p></td></tr><tr><td scope="row"><p> 16002 </p></td><td><p> Account not unique </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_18" title="MCCalDAVErrorDomain "></a><h3 class="jump">MCCalDAVErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 17000 </p></td><td><p> Cannot create account </p></td></tr><tr><td scope="row"><p> 17001 </p></td><td><p> No host name </p></td></tr><tr><td scope="row"><p> 17002 </p></td><td><p> Account not unique </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_19" title="MCDAErrorDomain "></a><h3 class="jump">MCDAErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 18000 </p></td><td><p> Unknown error </p></td></tr><tr><td scope="row"><p> 18001 </p></td><td><p> Host unreachable </p></td></tr><tr><td scope="row"><p> 18002 </p></td><td><p> Invalid credentials </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_20" title="MCLDAPErrorDomain "></a><h3 class="jump">MCLDAPErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 19000 </p></td><td><p> Cannot create account </p></td></tr><tr><td scope="row"><p> 19001 </p></td><td><p> No host name </p></td></tr><tr><td scope="row"><p> 19002 </p></td><td><p> Account not unique </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_21" title="MCCardDAVErrorDomain "></a><h3 class="jump">MCCardDAVErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 20000 </p></td><td><p> Cannot create account </p></td></tr><tr><td scope="row"><p> 20001 </p></td><td><p> No host name </p></td></tr><tr><td scope="row"><p> 20002 </p></td><td><p> Account not unique </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_22" title="MCEASErrorDomain "></a><h3 class="jump">MCEASErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 21000 </p></td><td><p> Cannot get policy from server </p></td></tr><tr><td scope="row"><p> 21001 </p></td><td><p> Cannot comply with policy from server </p></td></tr><tr><td scope="row"><p> 21002 </p></td><td><p> Cannot comply with encryption policy from server </p></td></tr><tr><td scope="row"><p> 21003 </p></td><td><p> No host name </p></td></tr><tr><td scope="row"><p> 21004 </p></td><td><p> Cannot create account </p></td></tr><tr><td scope="row"><p> 21005 </p></td><td><p> Account not unique </p></td></tr><tr><td scope="row"><p> 21006 </p></td><td><p> Cannot decrypt certificate </p></td></tr><tr><td scope="row"><p> 21007 </p></td><td><p> Cannot verify account </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_23" title="MCSCEPErrorDomain "></a><h3 class="jump">MCSCEPErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 22000 </p></td><td><p> Invalid key usage </p></td></tr><tr><td scope="row"><p> 22001 </p></td><td><p> Cannot generate key pair </p></td></tr><tr><td scope="row"><p> 22002 </p></td><td><p> Invalid CAResponse </p></td></tr><tr><td scope="row"><p> 22003 </p></td><td><p> Invalid RAResponse </p></td></tr><tr><td scope="row"><p> 22004 </p></td><td><p> Unsupported certificate configuration </p></td></tr><tr><td scope="row"><p> 22005 </p></td><td><p> Network error </p></td></tr><tr><td scope="row"><p> 22006 </p></td><td><p> Insufficient CACaps </p></td></tr><tr><td scope="row"><p> 22007 </p></td><td><p> Invalid signed certificate </p></td></tr><tr><td scope="row"><p> 22008 </p></td><td><p> Cannot create identity </p></td></tr><tr><td scope="row"><p> 22009 </p></td><td><p> Cannot create temporary identity </p></td></tr><tr><td scope="row"><p> 22010 </p></td><td><p> Cannot store temporary identity </p></td></tr><tr><td scope="row"><p> 22011 </p></td><td><p> Cannot generate CSR </p></td></tr><tr><td scope="row"><p> 22012 </p></td><td><p> Cannot store CACertificate </p></td></tr><tr><td scope="row"><p> 22013 </p></td><td><p> Invalid PKIOperation response </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_24" title="MCHTTPTransactionErrorDomain "></a><h3 class="jump">MCHTTPTransactionErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 23000 </p></td><td><p> Bad identity </p></td></tr><tr><td scope="row"><p> 23001 </p></td><td><p> Bad server response </p></td></tr><tr><td scope="row"><p> 23002 </p></td><td><p> Invalid server certificate </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_25" title="MCOTAProfilesErrorDomain "></a><h3 class="jump">MCOTAProfilesErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 24000 </p></td><td><p> Cannot create attribute dictionary </p></td></tr><tr><td scope="row"><p> 24001 </p></td><td><p> Cannot sign attribute dictionary </p></td></tr><tr><td scope="row"><p> 24002 </p></td><td><p> Bad identity payload </p></td></tr><tr><td scope="row"><p> 24003 </p></td><td><p> Bad final profile </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_26" title="MCProvisioningProfileErrorDomain "></a><h3 class="jump">MCProvisioningProfileErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 25000 </p></td><td><p> Bad profile </p></td></tr><tr><td scope="row"><p> 25001 </p></td><td><p> Cannot install </p></td></tr><tr><td scope="row"><p> 25002 </p></td><td><p> Cannot remove </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_27" title="MCDeviceCapabilitiesErrorDomain "></a><h3 class="jump">MCDeviceCapabilitiesErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 26000 </p></td><td><p> Block level encryption unsupported </p></td></tr><tr><td scope="row"><p> 26001 </p></td><td><p> File level encryption unsupported </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_28" title="MCSettingsErrorDomain "></a><h3 class="jump">MCSettingsErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 28000 </p></td><td><p> Unknown item </p></td></tr><tr><td scope="row"><p> 28001 </p></td><td><p> Bad wallpaper image </p></td></tr><tr><td scope="row"><p> 28002 </p></td><td><p> Cannot set wallpaper </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_29" title="MCChaperoneErrorDomain "></a><h3 class="jump">MCChaperoneErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 29000 </p></td><td><p> Device not supervised </p></td></tr><tr><td scope="row"><p> 29003 </p></td><td><p> Bad certificate data </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_30" title="MCStoreErrorDomain "></a><h3 class="jump">MCStoreErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 30000 </p></td><td><p> Authentication failed </p></td></tr><tr><td scope="row"><p> 30001 </p></td><td><p> Timed out </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_31" title="MCGlobalHTTPProxyErrorDomain "></a><h3 class="jump">MCGlobalHTTPProxyErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 31000 </p></td><td><p> Cannot apply credential </p></td></tr><tr><td scope="row"><p> 31001 </p></td><td><p> Cannot apply settings </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_32" title="MCSingleAppErrorDomain "></a><h3 class="jump">MCSingleAppErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 32000 </p></td><td><p> Too many apps </p></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_33" title="MCSSOErrorDomain "></a><h3 class="jump">MCSSOErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 34000 </p></td><td><p> Invalid app identifier match pattern </p></td></tr><tr><td scope="row"><p> 34001 </p></td><td><p> Invalid URL match pattern </p></td></tr><tr><td scope="row"><p> 34002 </p></td><td><p> Kerberos principal name missing </p></td></tr><tr><td scope="row"><p> 34003 </p></td><td><p> Kerberos principal name invalid </p></td></tr>
<tr><td scope="row"><p> 34004 </p></td><td><p> Kerberos identity certificate cannot be found </p></td></tr>
</table></div></section><section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_34" title="MCFontErrorDomain "></a><h3 class="jump">MCFontErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 35000 </p></td><td><p> Invalid font data </p></td></tr><tr><td scope="row"><p> 35001 </p></td><td><p> Failed font installation </p></td></tr><tr><td scope="row"><p> 35002 </p></td><td><p> Multiple fonts in a single payload </p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_35" title="MCCellularErrorDomain "></a><h3 class="jump">MCCellularErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 36000 </p></td><td><p> Cellular already configured </p></td></tr><tr><td scope="row"><p> 36001 </p></td><td><p> Internal error </p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_36" title="MCKeybagErrorDomain "></a><h3 class="jump">MCKeybagErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 37000 </p></td><td><p> Internal error </p></td></tr><tr><td scope="row"><p> 37001 </p></td><td><p> Internal error </p></td></tr></table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_37" title="MCDomainsErrorDomain "></a><h3 class="jump">MCDomainsErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 38000 </p></td><td><p> Invalid domain matching pattern </p></td></tr>
</table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_38" title="MCWebContentFilterErrorDomain "></a><h3 class="jump">MCWebContentFilterErrorDomain </h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr><tr><td scope="row"><p> 40000 </p></td><td><p> Internal error </p></td></tr>
<tr><td scope="row"><p> 40001 </p></td><td><p> Invalid certificate </p></td></tr>
</table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_39" title="MCNetworkUsageRulesErrorDomain"></a><h3 class="jump">MCNetworkUsageRulesErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 41000 </p></td><td><p> Internal error </p></td></tr>
<tr><td scope="row"><p> 41001 </p></td><td><p> Invalid configuration </p></td></tr>
<tr><td scope="row"><p> 41002 </p></td><td><p> Internal error </p></td></tr>
</table></div></section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_40" title="MCOSXServerErrorDomain"></a><h3 class="jump">MCOSXServerErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5"><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 42000 </p></td><td><p> Cannot create account </p></td></tr>
<tr><td scope="row"><p> 42001 </p></td><td><p> No hostname </p></td></tr>
<tr><td scope="row"><p> 42002 </p></td><td><p> Account not unique </p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_43" title="MCHomeScreenLayoutErrorDomain"></a><h3 class="jump">MCHomeScreenLayoutErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 43000 </p></td><td><p> Multiple Home screen layouts </p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_44" title="MCNotificationSettingsErrorDomain"></a><h3 class="jump">MCNotificationSettingsErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 44000 </p></td><td><p> Multiple notification settings </p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_45" title="MCEDUClassroomErrorDomain"></a><h3 class="jump">MCEDUClassroomErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 45000 </p></td><td><p> Cannot install </p></td></tr>
<tr><td scope="row"><p> 45001 </p></td><td><p> Student already installed </p></td></tr>
<tr><td scope="row"><p> 45002 </p></td><td><p> Cannot find certificate </p></td></tr>
<tr><td scope="row"><p> 45003 </p></td><td><p> Bad identity certificate </p></td></tr>
</table></div>
</section>

<section><a name="//apple_ref/doc/uid/TP40017387-CH3-TRANSLATED_DEST_46" title="MCSharedDeviceConfigurationErrorDomain"></a><h3 class="jump">MCSharedDeviceConfigurationErrorDomain</h3><div class="tableholder"><table class="graybox" border="0" cellspacing="0" cellpadding="5">
<tr><th scope="col" class="TableHeading_TableRow_TableCell"><p> Code </p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p> Meaning </p></th></tr>
<tr><td scope="row"><p> 46000 </p></td><td><p> Multiple shared device configurations </p></td></tr>
</table></div>
</section>
</section>

        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class="nextLink" rel="next" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/4-Profile_Management/ProfileManagement.html">Next</a><a class="previousLink" rel="prev" href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/MobileDeviceManagementProtocolRef/2-MDM_Check_In_Protocol/MDM_Check_In_Protocol..html">Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr/><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2017 Apple Inc. All Rights Reserved.  <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2017-09-12</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1"/> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2"/> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3"/> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo"/> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect"/> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples"/> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art"/> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo"/> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send"/>

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="https://developer.apple.com/library/content/Resources/1264/JavaScript/lib/prototype.js"></script>
    <script src="https://developer.apple.com/library/content/Resources/1264/JavaScript/library.js"></script>
    <script src="https://developer.apple.com/library/content/Resources/1264/JavaScript/feedback.js"></script>
</body>
</html>
